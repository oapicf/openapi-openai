/**
 * OpenAI API
 * The OpenAI REST API. Please see https://platform.openai.com/docs/api-reference for more details.
 *
 * The version of the OpenAPI document: 2.3.0
 * Contact: blah+oapicf@cliffano.com
 *
 * NOTE: This class is auto generated by OpenAPI-Generator 7.18.0.
 * https://openapi-generator.tech
 * Do not edit the class manually.
 */

/*
 * UploadsApi.h
 *
 * 
 */

#ifndef UploadsApi_H_
#define UploadsApi_H_


#include <memory>
#include <utility>
#include <exception>
#include <functional>

#include <corvusoft/restbed/session.hpp>
#include <corvusoft/restbed/resource.hpp>
#include <corvusoft/restbed/request.hpp>
#include <corvusoft/restbed/service.hpp>
#include <corvusoft/restbed/settings.hpp>

#include "CompleteUploadRequest.h"
#include "CreateUploadRequest.h"
#include "Upload.h"
#include "UploadPart.h"
#include <string>

namespace org {
namespace openapitools {
namespace server {
namespace api {

using namespace org::openapitools::server::model;

///
/// Exception to flag problems in the handlers
///
class  UploadsApiException: public std::exception
{
public:
    UploadsApiException(int status_code, std::string what);

    int getStatus() const;
    const char* what() const noexcept override;

private:
    int m_status;
    std::string m_what;
};

namespace UploadsApiResources {
/// <summary>
/// Adds a [Part](/docs/api-reference/uploads/part-object) to an [Upload](/docs/api-reference/uploads/object) object. A Part represents a chunk of bytes from the file you are trying to upload.   Each Part can be at most 64 MB, and you can add Parts until you hit the Upload maximum of 8 GB.  It is possible to add multiple Parts in parallel. You can decide the intended order of the Parts when you [complete the Upload](/docs/api-reference/uploads/complete). 
/// </summary>
/// <remarks>
/// 
/// </remarks>
class  UploadsUpload_idPartsResource: public restbed::Resource
{
public:
    UploadsUpload_idPartsResource(const std::string& context = "/v1");
    virtual ~UploadsUpload_idPartsResource() = default;

    UploadsUpload_idPartsResource(
        const UploadsUpload_idPartsResource& other) = default; // copy constructor
    UploadsUpload_idPartsResource(UploadsUpload_idPartsResource&& other) noexcept = default; // move constructor

    UploadsUpload_idPartsResource& operator=(const UploadsUpload_idPartsResource& other) = default; // copy assignment
    UploadsUpload_idPartsResource& operator=(UploadsUpload_idPartsResource&& other) noexcept = default; // move assignment

    /////////////////////////////////////////////////////
    // Set these to implement the server functionality //
    /////////////////////////////////////////////////////
    std::function<std::pair<int, UploadPart>(
        std::string & uploadId, std::string & data)> handler_POST_func =
            [](std::string &, std::string &) -> std::pair<int, UploadPart>
                { throw UploadsApiException(501, "Not implemented"); };


protected:
    //////////////////////////////////////////////////////////
    // As an alternative to setting the `std::function`s    //
    // override these to implement the server functionality //
    //////////////////////////////////////////////////////////

    virtual std::pair<int, UploadPart> handler_POST(
        std::string & uploadId, std::string & data);


protected:
    //////////////////////////////////////
    // Override these for customization //
    //////////////////////////////////////

    virtual std::string extractBodyContent(const std::shared_ptr<restbed::Session>& session);
    virtual std::string extractFormParamsFromBody(const std::string& paramName, const std::string& body);

    virtual std::pair<int, std::string> handleUploadsApiException(const UploadsApiException& e);
    virtual std::pair<int, std::string> handleStdException(const std::exception& e);
    virtual std::pair<int, std::string> handleUnspecifiedException();

    virtual void setResponseHeader(const std::shared_ptr<restbed::Session>& session,
        const std::string& header);

    virtual void returnResponse(const std::shared_ptr<restbed::Session>& session,
        const int status, const std::string& result, std::multimap<std::string, std::string>& contentType);
    virtual void defaultSessionClose(const std::shared_ptr<restbed::Session>& session,
        const int status, const std::string& result);

private:
    void handler_POST_internal(const std::shared_ptr<restbed::Session> session);
};

/// <summary>
/// Cancels the Upload. No Parts may be added after an Upload is cancelled. 
/// </summary>
/// <remarks>
/// 
/// </remarks>
class  UploadsUpload_idCancelResource: public restbed::Resource
{
public:
    UploadsUpload_idCancelResource(const std::string& context = "/v1");
    virtual ~UploadsUpload_idCancelResource() = default;

    UploadsUpload_idCancelResource(
        const UploadsUpload_idCancelResource& other) = default; // copy constructor
    UploadsUpload_idCancelResource(UploadsUpload_idCancelResource&& other) noexcept = default; // move constructor

    UploadsUpload_idCancelResource& operator=(const UploadsUpload_idCancelResource& other) = default; // copy assignment
    UploadsUpload_idCancelResource& operator=(UploadsUpload_idCancelResource&& other) noexcept = default; // move assignment

    /////////////////////////////////////////////////////
    // Set these to implement the server functionality //
    /////////////////////////////////////////////////////
    std::function<std::pair<int, Upload>(
        std::string & uploadId)> handler_POST_func =
            [](std::string &) -> std::pair<int, Upload>
                { throw UploadsApiException(501, "Not implemented"); };


protected:
    //////////////////////////////////////////////////////////
    // As an alternative to setting the `std::function`s    //
    // override these to implement the server functionality //
    //////////////////////////////////////////////////////////

    virtual std::pair<int, Upload> handler_POST(
        std::string & uploadId);


protected:
    //////////////////////////////////////
    // Override these for customization //
    //////////////////////////////////////

    virtual std::string extractBodyContent(const std::shared_ptr<restbed::Session>& session);
    virtual std::string extractFormParamsFromBody(const std::string& paramName, const std::string& body);

    virtual std::pair<int, std::string> handleUploadsApiException(const UploadsApiException& e);
    virtual std::pair<int, std::string> handleStdException(const std::exception& e);
    virtual std::pair<int, std::string> handleUnspecifiedException();

    virtual void setResponseHeader(const std::shared_ptr<restbed::Session>& session,
        const std::string& header);

    virtual void returnResponse(const std::shared_ptr<restbed::Session>& session,
        const int status, const std::string& result, std::multimap<std::string, std::string>& contentType);
    virtual void defaultSessionClose(const std::shared_ptr<restbed::Session>& session,
        const int status, const std::string& result);

private:
    void handler_POST_internal(const std::shared_ptr<restbed::Session> session);
};

/// <summary>
/// Completes the [Upload](/docs/api-reference/uploads/object).   Within the returned Upload object, there is a nested [File](/docs/api-reference/files/object) object that is ready to use in the rest of the platform.  You can specify the order of the Parts by passing in an ordered list of the Part IDs.  The number of bytes uploaded upon completion must match the number of bytes initially specified when creating the Upload object. No Parts may be added after an Upload is completed. 
/// </summary>
/// <remarks>
/// 
/// </remarks>
class  UploadsUpload_idCompleteResource: public restbed::Resource
{
public:
    UploadsUpload_idCompleteResource(const std::string& context = "/v1");
    virtual ~UploadsUpload_idCompleteResource() = default;

    UploadsUpload_idCompleteResource(
        const UploadsUpload_idCompleteResource& other) = default; // copy constructor
    UploadsUpload_idCompleteResource(UploadsUpload_idCompleteResource&& other) noexcept = default; // move constructor

    UploadsUpload_idCompleteResource& operator=(const UploadsUpload_idCompleteResource& other) = default; // copy assignment
    UploadsUpload_idCompleteResource& operator=(UploadsUpload_idCompleteResource&& other) noexcept = default; // move assignment

    /////////////////////////////////////////////////////
    // Set these to implement the server functionality //
    /////////////////////////////////////////////////////
    std::function<std::pair<int, Upload>(
        std::string & uploadId, CompleteUploadRequest & completeUploadRequest)> handler_POST_func =
            [](std::string &, CompleteUploadRequest &) -> std::pair<int, Upload>
                { throw UploadsApiException(501, "Not implemented"); };


protected:
    //////////////////////////////////////////////////////////
    // As an alternative to setting the `std::function`s    //
    // override these to implement the server functionality //
    //////////////////////////////////////////////////////////

    virtual std::pair<int, Upload> handler_POST(
        std::string & uploadId, CompleteUploadRequest & completeUploadRequest);


protected:
    //////////////////////////////////////
    // Override these for customization //
    //////////////////////////////////////

    virtual std::string extractBodyContent(const std::shared_ptr<restbed::Session>& session);
    virtual std::string extractFormParamsFromBody(const std::string& paramName, const std::string& body);

    virtual std::pair<int, std::string> handleUploadsApiException(const UploadsApiException& e);
    virtual std::pair<int, std::string> handleStdException(const std::exception& e);
    virtual std::pair<int, std::string> handleUnspecifiedException();

    virtual void setResponseHeader(const std::shared_ptr<restbed::Session>& session,
        const std::string& header);

    virtual void returnResponse(const std::shared_ptr<restbed::Session>& session,
        const int status, const std::string& result, std::multimap<std::string, std::string>& contentType);
    virtual void defaultSessionClose(const std::shared_ptr<restbed::Session>& session,
        const int status, const std::string& result);

private:
    void handler_POST_internal(const std::shared_ptr<restbed::Session> session);
};

/// <summary>
/// Creates an intermediate [Upload](/docs/api-reference/uploads/object) object that you can add [Parts](/docs/api-reference/uploads/part-object) to. Currently, an Upload can accept at most 8 GB in total and expires after an hour after you create it.  Once you complete the Upload, we will create a [File](/docs/api-reference/files/object) object that contains all the parts you uploaded. This File is usable in the rest of our platform as a regular File object.  For certain &#x60;purpose&#x60;s, the correct &#x60;mime_type&#x60; must be specified. Please refer to documentation for the supported MIME types for your use case: - [Assistants](/docs/assistants/tools/file-search#supported-files)  For guidance on the proper filename extensions for each purpose, please follow the documentation on [creating a File](/docs/api-reference/files/create). 
/// </summary>
/// <remarks>
/// 
/// </remarks>
class  UploadsResource: public restbed::Resource
{
public:
    UploadsResource(const std::string& context = "/v1");
    virtual ~UploadsResource() = default;

    UploadsResource(
        const UploadsResource& other) = default; // copy constructor
    UploadsResource(UploadsResource&& other) noexcept = default; // move constructor

    UploadsResource& operator=(const UploadsResource& other) = default; // copy assignment
    UploadsResource& operator=(UploadsResource&& other) noexcept = default; // move assignment

    /////////////////////////////////////////////////////
    // Set these to implement the server functionality //
    /////////////////////////////////////////////////////
    std::function<std::pair<int, Upload>(
        CreateUploadRequest & createUploadRequest)> handler_POST_func =
            [](CreateUploadRequest &) -> std::pair<int, Upload>
                { throw UploadsApiException(501, "Not implemented"); };


protected:
    //////////////////////////////////////////////////////////
    // As an alternative to setting the `std::function`s    //
    // override these to implement the server functionality //
    //////////////////////////////////////////////////////////

    virtual std::pair<int, Upload> handler_POST(
        CreateUploadRequest & createUploadRequest);


protected:
    //////////////////////////////////////
    // Override these for customization //
    //////////////////////////////////////

    virtual std::string extractBodyContent(const std::shared_ptr<restbed::Session>& session);
    virtual std::string extractFormParamsFromBody(const std::string& paramName, const std::string& body);

    virtual std::pair<int, std::string> handleUploadsApiException(const UploadsApiException& e);
    virtual std::pair<int, std::string> handleStdException(const std::exception& e);
    virtual std::pair<int, std::string> handleUnspecifiedException();

    virtual void setResponseHeader(const std::shared_ptr<restbed::Session>& session,
        const std::string& header);

    virtual void returnResponse(const std::shared_ptr<restbed::Session>& session,
        const int status, const std::string& result, std::multimap<std::string, std::string>& contentType);
    virtual void defaultSessionClose(const std::shared_ptr<restbed::Session>& session,
        const int status, const std::string& result);

private:
    void handler_POST_internal(const std::shared_ptr<restbed::Session> session);
};

} /* namespace UploadsApiResources */

using UploadsApiUploadsUpload_idPartsResource [[deprecated]] = UploadsApiResources::UploadsUpload_idPartsResource;
using UploadsApiUploadsUpload_idCancelResource [[deprecated]] = UploadsApiResources::UploadsUpload_idCancelResource;
using UploadsApiUploadsUpload_idCompleteResource [[deprecated]] = UploadsApiResources::UploadsUpload_idCompleteResource;
using UploadsApiUploadsResource [[deprecated]] = UploadsApiResources::UploadsResource;

//
// The restbed service to actually implement the REST server
//
class  UploadsApi
{
public:
    explicit UploadsApi(std::shared_ptr<restbed::Service> const& restbedService);
    virtual ~UploadsApi();

    std::shared_ptr<UploadsApiResources::UploadsUpload_idPartsResource> getUploadsUpload_idPartsResource();
    std::shared_ptr<UploadsApiResources::UploadsUpload_idCancelResource> getUploadsUpload_idCancelResource();
    std::shared_ptr<UploadsApiResources::UploadsUpload_idCompleteResource> getUploadsUpload_idCompleteResource();
    std::shared_ptr<UploadsApiResources::UploadsResource> getUploadsResource();

    void setResource(std::shared_ptr<UploadsApiResources::UploadsUpload_idPartsResource> resource);
    void setResource(std::shared_ptr<UploadsApiResources::UploadsUpload_idCancelResource> resource);
    void setResource(std::shared_ptr<UploadsApiResources::UploadsUpload_idCompleteResource> resource);
    void setResource(std::shared_ptr<UploadsApiResources::UploadsResource> resource);
    [[deprecated("use setResource()")]]
    virtual void setUploadsApiUploadsUpload_idPartsResource(std::shared_ptr<UploadsApiResources::UploadsUpload_idPartsResource> spUploadsApiUploadsUpload_idPartsResource);
    [[deprecated("use setResource()")]]
    virtual void setUploadsApiUploadsUpload_idCancelResource(std::shared_ptr<UploadsApiResources::UploadsUpload_idCancelResource> spUploadsApiUploadsUpload_idCancelResource);
    [[deprecated("use setResource()")]]
    virtual void setUploadsApiUploadsUpload_idCompleteResource(std::shared_ptr<UploadsApiResources::UploadsUpload_idCompleteResource> spUploadsApiUploadsUpload_idCompleteResource);
    [[deprecated("use setResource()")]]
    virtual void setUploadsApiUploadsResource(std::shared_ptr<UploadsApiResources::UploadsResource> spUploadsApiUploadsResource);

    virtual void publishDefaultResources();

    virtual std::shared_ptr<restbed::Service> service();

protected:
    std::shared_ptr<UploadsApiResources::UploadsUpload_idPartsResource> m_spUploadsUpload_idPartsResource;
    std::shared_ptr<UploadsApiResources::UploadsUpload_idCancelResource> m_spUploadsUpload_idCancelResource;
    std::shared_ptr<UploadsApiResources::UploadsUpload_idCompleteResource> m_spUploadsUpload_idCompleteResource;
    std::shared_ptr<UploadsApiResources::UploadsResource> m_spUploadsResource;

private:
    std::shared_ptr<restbed::Service> m_service;
};


}
}
}
}

#endif /* UploadsApi_H_ */

