# #OpenAI API
#
##The OpenAI REST API. Please see https://platform.openai.com/docs/api-reference for more details.
#
#The version of the OpenAPI document: 2.3.0
#Contact: blah+oapicf@cliffano.com
#Generated by: https://openapi-generator.tech
#Generator version: 7.18.0
#

require "uri"

module OpenAPIClient
  class BatchApi
    property api_client : ApiClient

    def initialize(api_client = ApiClient.default)
      @api_client = api_client
    end
    # Cancels an in-progress batch. The batch will be in status `cancelling` for up to 10 minutes, before changing to `cancelled`, where it will have partial results (if any) available in the output file.
    # @param batch_id [String] The ID of the batch to cancel.
    # @return [Batch]
    def cancel_batch(batch_id : String)
      data, _status_code, _headers = cancel_batch_with_http_info(batch_id)
      data
    end

    # Cancels an in-progress batch. The batch will be in status &#x60;cancelling&#x60; for up to 10 minutes, before changing to &#x60;cancelled&#x60;, where it will have partial results (if any) available in the output file.
    # @param batch_id [String] The ID of the batch to cancel.
    # @return [Array<(Batch, Integer, Hash)>] Batch data, response status code and response headers
    def cancel_batch_with_http_info(batch_id : String)
      if @api_client.config.debugging
        Log.debug {"Calling API: BatchApi.cancel_batch ..."}
      end
      # verify the required parameter "batch_id" is set
      if @api_client.config.client_side_validation && batch_id.nil?
        raise ArgumentError.new("Missing the required parameter 'batch_id' when calling BatchApi.cancel_batch")
      end
      # resource path
      local_var_path = "/batches/{batch_id}/cancel".sub("{" + "batch_id" + "}", URI.encode_path(batch_id.to_s))

      # cookie parameters
      cookie_params = Hash(String, String).new

      # query parameters
      query_params = Hash(String, String | Array(String)).new

      # header parameters
      header_params = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # form parameters
      form_params = Hash(Symbol, (String | ::File)).new

      # http body (model)
      post_body = nil

      # return_type
      return_type = "Batch"

      # auth_names
      auth_names = ["ApiKeyAuth"]

      data, status_code, headers = @api_client.call_api(:POST,
                                                        local_var_path,
                                                        :"BatchApi.cancel_batch",
                                                        return_type,
                                                        post_body,
                                                        auth_names,
                                                        header_params,
                                                        query_params,
                                                        cookie_params,
                                                        form_params)
      if @api_client.config.debugging
        Log.debug {"API called: BatchApi#cancel_batch\nData: #{data.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}"}
      end
      return Batch.from_json(data), status_code, headers
    end

    # Creates and executes a batch from an uploaded file of requests
    # @param create_batch_request [CreateBatchRequest] 
    # @return [Batch]
    def create_batch(create_batch_request : CreateBatchRequest)
      data, _status_code, _headers = create_batch_with_http_info(create_batch_request)
      data
    end

    # Creates and executes a batch from an uploaded file of requests
    # @param create_batch_request [CreateBatchRequest] 
    # @return [Array<(Batch, Integer, Hash)>] Batch data, response status code and response headers
    def create_batch_with_http_info(create_batch_request : CreateBatchRequest)
      if @api_client.config.debugging
        Log.debug {"Calling API: BatchApi.create_batch ..."}
      end
      # verify the required parameter "create_batch_request" is set
      if @api_client.config.client_side_validation && create_batch_request.nil?
        raise ArgumentError.new("Missing the required parameter 'create_batch_request' when calling BatchApi.create_batch")
      end
      # resource path
      local_var_path = "/batches"

      # cookie parameters
      cookie_params = Hash(String, String).new

      # query parameters
      query_params = Hash(String, String | Array(String)).new

      # header parameters
      header_params = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])
      # HTTP header "Content-Type"
      header_params["Content-Type"] = @api_client.select_header_content_type(["application/json"])

      # form parameters
      form_params = Hash(Symbol, (String | ::File)).new

      # http body (model)
      post_body = create_batch_request.to_json

      # return_type
      return_type = "Batch"

      # auth_names
      auth_names = ["ApiKeyAuth"]

      data, status_code, headers = @api_client.call_api(:POST,
                                                        local_var_path,
                                                        :"BatchApi.create_batch",
                                                        return_type,
                                                        post_body,
                                                        auth_names,
                                                        header_params,
                                                        query_params,
                                                        cookie_params,
                                                        form_params)
      if @api_client.config.debugging
        Log.debug {"API called: BatchApi#create_batch\nData: #{data.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}"}
      end
      return Batch.from_json(data), status_code, headers
    end

    # List your organization's batches.
    # @return [ListBatchesResponse]
    def list_batches(after : String? = nil, limit : Int32? = nil)
      data, _status_code, _headers = list_batches_with_http_info(after, limit)
      data
    end

    # List your organization&#39;s batches.
    # @return [Array<(ListBatchesResponse, Integer, Hash)>] ListBatchesResponse data, response status code and response headers
    def list_batches_with_http_info(after : String? = nil, limit : Int32? = nil)
      if @api_client.config.debugging
        Log.debug {"Calling API: BatchApi.list_batches ..."}
      end
      # resource path
      local_var_path = "/batches"

      # cookie parameters
      cookie_params = Hash(String, String).new

      # query parameters
      query_params = Hash(String, String | Array(String)).new
      query_params["after"] = after.to_s unless after.nil?
      query_params["limit"] = limit.to_s unless limit.nil?

      # header parameters
      header_params = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # form parameters
      form_params = Hash(Symbol, (String | ::File)).new

      # http body (model)
      post_body = nil

      # return_type
      return_type = "ListBatchesResponse"

      # auth_names
      auth_names = ["ApiKeyAuth"]

      data, status_code, headers = @api_client.call_api(:GET,
                                                        local_var_path,
                                                        :"BatchApi.list_batches",
                                                        return_type,
                                                        post_body,
                                                        auth_names,
                                                        header_params,
                                                        query_params,
                                                        cookie_params,
                                                        form_params)
      if @api_client.config.debugging
        Log.debug {"API called: BatchApi#list_batches\nData: #{data.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}"}
      end
      return ListBatchesResponse.from_json(data), status_code, headers
    end

    # Retrieves a batch.
    # @param batch_id [String] The ID of the batch to retrieve.
    # @return [Batch]
    def retrieve_batch(batch_id : String)
      data, _status_code, _headers = retrieve_batch_with_http_info(batch_id)
      data
    end

    # Retrieves a batch.
    # @param batch_id [String] The ID of the batch to retrieve.
    # @return [Array<(Batch, Integer, Hash)>] Batch data, response status code and response headers
    def retrieve_batch_with_http_info(batch_id : String)
      if @api_client.config.debugging
        Log.debug {"Calling API: BatchApi.retrieve_batch ..."}
      end
      # verify the required parameter "batch_id" is set
      if @api_client.config.client_side_validation && batch_id.nil?
        raise ArgumentError.new("Missing the required parameter 'batch_id' when calling BatchApi.retrieve_batch")
      end
      # resource path
      local_var_path = "/batches/{batch_id}".sub("{" + "batch_id" + "}", URI.encode_path(batch_id.to_s))

      # cookie parameters
      cookie_params = Hash(String, String).new

      # query parameters
      query_params = Hash(String, String | Array(String)).new

      # header parameters
      header_params = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # form parameters
      form_params = Hash(Symbol, (String | ::File)).new

      # http body (model)
      post_body = nil

      # return_type
      return_type = "Batch"

      # auth_names
      auth_names = ["ApiKeyAuth"]

      data, status_code, headers = @api_client.call_api(:GET,
                                                        local_var_path,
                                                        :"BatchApi.retrieve_batch",
                                                        return_type,
                                                        post_body,
                                                        auth_names,
                                                        header_params,
                                                        query_params,
                                                        cookie_params,
                                                        form_params)
      if @api_client.config.debugging
        Log.debug {"API called: BatchApi#retrieve_batch\nData: #{data.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}"}
      end
      return Batch.from_json(data), status_code, headers
    end
  end
end
