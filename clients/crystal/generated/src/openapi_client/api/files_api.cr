# #OpenAI API
#
##The OpenAI REST API. Please see https://platform.openai.com/docs/api-reference for more details.
#
#The version of the OpenAPI document: 2.0.0
#Contact: blah+oapicf@cliffano.com
#Generated by: https://openapi-generator.tech
#Generator version: 7.18.0
#

require "uri"

module OpenAPIClient
  class FilesApi
    property api_client : ApiClient

    def initialize(api_client = ApiClient.default)
      @api_client = api_client
    end
    # Upload a file that can be used across various endpoints. The size of all the files uploaded by one organization can be up to 100 GB.  The size of individual files can be a maximum of 512 MB or 2 million tokens for Assistants. See the [Assistants Tools guide](/docs/assistants/tools) to learn more about the types of files supported. The Fine-tuning API only supports `.jsonl` files.  Please [contact us](https://help.openai.com/) if you need to increase these storage limits. 
    # @param file [::File] The File object (not file name) to be uploaded. 
    # @param purpose [String] The intended purpose of the uploaded file.  Use \\\&quot;fine-tune\\\&quot; for [Fine-tuning](/docs/api-reference/fine-tuning) and \\\&quot;assistants\\\&quot; for [Assistants](/docs/api-reference/assistants) and [Messages](/docs/api-reference/messages). This allows us to validate the format of the uploaded file is correct for fine-tuning. 
    # @return [OpenAIFile]
    def create_file(file : ::File, purpose : String)
      data, _status_code, _headers = create_file_with_http_info(file, purpose)
      data
    end

    # Upload a file that can be used across various endpoints. The size of all the files uploaded by one organization can be up to 100 GB.  The size of individual files can be a maximum of 512 MB or 2 million tokens for Assistants. See the [Assistants Tools guide](/docs/assistants/tools) to learn more about the types of files supported. The Fine-tuning API only supports &#x60;.jsonl&#x60; files.  Please [contact us](https://help.openai.com/) if you need to increase these storage limits. 
    # @param file [::File] The File object (not file name) to be uploaded. 
    # @param purpose [String] The intended purpose of the uploaded file.  Use \\\&quot;fine-tune\\\&quot; for [Fine-tuning](/docs/api-reference/fine-tuning) and \\\&quot;assistants\\\&quot; for [Assistants](/docs/api-reference/assistants) and [Messages](/docs/api-reference/messages). This allows us to validate the format of the uploaded file is correct for fine-tuning. 
    # @return [Array<(OpenAIFile, Integer, Hash)>] OpenAIFile data, response status code and response headers
    def create_file_with_http_info(file : ::File, purpose : String)
      if @api_client.config.debugging
        Log.debug {"Calling API: FilesApi.create_file ..."}
      end
      # verify the required parameter "file" is set
      if @api_client.config.client_side_validation && file.nil?
        raise ArgumentError.new("Missing the required parameter 'file' when calling FilesApi.create_file")
      end
      # verify the required parameter "purpose" is set
      if @api_client.config.client_side_validation && purpose.nil?
        raise ArgumentError.new("Missing the required parameter 'purpose' when calling FilesApi.create_file")
      end
      # verify enum value
      allowable_values = ["fine-tune", "assistants"]
      if @api_client.config.client_side_validation && !allowable_values.includes?(purpose)
        raise ArgumentError.new("invalid value for \"purpose\", must be one of #{allowable_values}")
      end
      # resource path
      local_var_path = "/files"

      # cookie parameters
      cookie_params = Hash(String, String).new

      # query parameters
      query_params = Hash(String, String | Array(String)).new

      # header parameters
      header_params = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])
      # HTTP header "Content-Type"
      header_params["Content-Type"] = @api_client.select_header_content_type(["multipart/form-data"])

      # form parameters
      form_params = Hash(Symbol, (String | ::File)).new
      form_params[:"file"] = file unless file.nil?
      form_params[:"purpose"] = purpose unless purpose.nil?

      # http body (model)
      post_body = nil

      # return_type
      return_type = "OpenAIFile"

      # auth_names
      auth_names = ["ApiKeyAuth"]

      data, status_code, headers = @api_client.call_api(:POST,
                                                        local_var_path,
                                                        :"FilesApi.create_file",
                                                        return_type,
                                                        post_body,
                                                        auth_names,
                                                        header_params,
                                                        query_params,
                                                        cookie_params,
                                                        form_params)
      if @api_client.config.debugging
        Log.debug {"API called: FilesApi#create_file\nData: #{data.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}"}
      end
      return OpenAIFile.from_json(data), status_code, headers
    end

    # Delete a file.
    # @param file_id [String] The ID of the file to use for this request.
    # @return [DeleteFileResponse]
    def delete_file(file_id : String)
      data, _status_code, _headers = delete_file_with_http_info(file_id)
      data
    end

    # Delete a file.
    # @param file_id [String] The ID of the file to use for this request.
    # @return [Array<(DeleteFileResponse, Integer, Hash)>] DeleteFileResponse data, response status code and response headers
    def delete_file_with_http_info(file_id : String)
      if @api_client.config.debugging
        Log.debug {"Calling API: FilesApi.delete_file ..."}
      end
      # verify the required parameter "file_id" is set
      if @api_client.config.client_side_validation && file_id.nil?
        raise ArgumentError.new("Missing the required parameter 'file_id' when calling FilesApi.delete_file")
      end
      # resource path
      local_var_path = "/files/{file_id}".sub("{" + "file_id" + "}", URI.encode_path(file_id.to_s))

      # cookie parameters
      cookie_params = Hash(String, String).new

      # query parameters
      query_params = Hash(String, String | Array(String)).new

      # header parameters
      header_params = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # form parameters
      form_params = Hash(Symbol, (String | ::File)).new

      # http body (model)
      post_body = nil

      # return_type
      return_type = "DeleteFileResponse"

      # auth_names
      auth_names = ["ApiKeyAuth"]

      data, status_code, headers = @api_client.call_api(:DELETE,
                                                        local_var_path,
                                                        :"FilesApi.delete_file",
                                                        return_type,
                                                        post_body,
                                                        auth_names,
                                                        header_params,
                                                        query_params,
                                                        cookie_params,
                                                        form_params)
      if @api_client.config.debugging
        Log.debug {"API called: FilesApi#delete_file\nData: #{data.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}"}
      end
      return DeleteFileResponse.from_json(data), status_code, headers
    end

    # Returns the contents of the specified file.
    # @param file_id [String] The ID of the file to use for this request.
    # @return [String]
    def download_file(file_id : String)
      data, _status_code, _headers = download_file_with_http_info(file_id)
      data
    end

    # Returns the contents of the specified file.
    # @param file_id [String] The ID of the file to use for this request.
    # @return [Array<(String, Integer, Hash)>] String data, response status code and response headers
    def download_file_with_http_info(file_id : String)
      if @api_client.config.debugging
        Log.debug {"Calling API: FilesApi.download_file ..."}
      end
      # verify the required parameter "file_id" is set
      if @api_client.config.client_side_validation && file_id.nil?
        raise ArgumentError.new("Missing the required parameter 'file_id' when calling FilesApi.download_file")
      end
      # resource path
      local_var_path = "/files/{file_id}/content".sub("{" + "file_id" + "}", URI.encode_path(file_id.to_s))

      # cookie parameters
      cookie_params = Hash(String, String).new

      # query parameters
      query_params = Hash(String, String | Array(String)).new

      # header parameters
      header_params = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # form parameters
      form_params = Hash(Symbol, (String | ::File)).new

      # http body (model)
      post_body = nil

      # return_type
      return_type = "String"

      # auth_names
      auth_names = ["ApiKeyAuth"]

      data, status_code, headers = @api_client.call_api(:GET,
                                                        local_var_path,
                                                        :"FilesApi.download_file",
                                                        return_type,
                                                        post_body,
                                                        auth_names,
                                                        header_params,
                                                        query_params,
                                                        cookie_params,
                                                        form_params)
      if @api_client.config.debugging
        Log.debug {"API called: FilesApi#download_file\nData: #{data.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}"}
      end
      return String.from_json(data), status_code, headers
    end

    # Returns a list of files that belong to the user's organization.
    # @return [ListFilesResponse]
    def list_files(purpose : String? = nil)
      data, _status_code, _headers = list_files_with_http_info(purpose)
      data
    end

    # Returns a list of files that belong to the user&#39;s organization.
    # @return [Array<(ListFilesResponse, Integer, Hash)>] ListFilesResponse data, response status code and response headers
    def list_files_with_http_info(purpose : String? = nil)
      if @api_client.config.debugging
        Log.debug {"Calling API: FilesApi.list_files ..."}
      end
      # resource path
      local_var_path = "/files"

      # cookie parameters
      cookie_params = Hash(String, String).new

      # query parameters
      query_params = Hash(String, String | Array(String)).new
      query_params["purpose"] = purpose.to_s unless purpose.nil?

      # header parameters
      header_params = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # form parameters
      form_params = Hash(Symbol, (String | ::File)).new

      # http body (model)
      post_body = nil

      # return_type
      return_type = "ListFilesResponse"

      # auth_names
      auth_names = ["ApiKeyAuth"]

      data, status_code, headers = @api_client.call_api(:GET,
                                                        local_var_path,
                                                        :"FilesApi.list_files",
                                                        return_type,
                                                        post_body,
                                                        auth_names,
                                                        header_params,
                                                        query_params,
                                                        cookie_params,
                                                        form_params)
      if @api_client.config.debugging
        Log.debug {"API called: FilesApi#list_files\nData: #{data.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}"}
      end
      return ListFilesResponse.from_json(data), status_code, headers
    end

    # Returns information about a specific file.
    # @param file_id [String] The ID of the file to use for this request.
    # @return [OpenAIFile]
    def retrieve_file(file_id : String)
      data, _status_code, _headers = retrieve_file_with_http_info(file_id)
      data
    end

    # Returns information about a specific file.
    # @param file_id [String] The ID of the file to use for this request.
    # @return [Array<(OpenAIFile, Integer, Hash)>] OpenAIFile data, response status code and response headers
    def retrieve_file_with_http_info(file_id : String)
      if @api_client.config.debugging
        Log.debug {"Calling API: FilesApi.retrieve_file ..."}
      end
      # verify the required parameter "file_id" is set
      if @api_client.config.client_side_validation && file_id.nil?
        raise ArgumentError.new("Missing the required parameter 'file_id' when calling FilesApi.retrieve_file")
      end
      # resource path
      local_var_path = "/files/{file_id}".sub("{" + "file_id" + "}", URI.encode_path(file_id.to_s))

      # cookie parameters
      cookie_params = Hash(String, String).new

      # query parameters
      query_params = Hash(String, String | Array(String)).new

      # header parameters
      header_params = Hash(String, String).new
      # HTTP header "Accept" (if needed)
      header_params["Accept"] = @api_client.select_header_accept(["application/json"])

      # form parameters
      form_params = Hash(Symbol, (String | ::File)).new

      # http body (model)
      post_body = nil

      # return_type
      return_type = "OpenAIFile"

      # auth_names
      auth_names = ["ApiKeyAuth"]

      data, status_code, headers = @api_client.call_api(:GET,
                                                        local_var_path,
                                                        :"FilesApi.retrieve_file",
                                                        return_type,
                                                        post_body,
                                                        auth_names,
                                                        header_params,
                                                        query_params,
                                                        cookie_params,
                                                        form_params)
      if @api_client.config.debugging
        Log.debug {"API called: FilesApi#retrieve_file\nData: #{data.inspect}\nStatus code: #{status_code}\nHeaders: #{headers}"}
      end
      return OpenAIFile.from_json(data), status_code, headers
    end
  end
end
