/*
 * OpenAI API
 *
 * The OpenAI REST API. Please see https://platform.openai.com/docs/api-reference for more details.
 *
 * The version of the OpenAPI document: 2.0.0
 * Contact: blah+oapicf@cliffano.com
 * Generated by: https://github.com/openapitools/openapi-generator.git
 */

#nullable enable

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text.Json;
using System.Text.Json.Serialization;
using System.Net.Http;
using Microsoft.Extensions.DependencyInjection;
using Org.OpenAPITools.Api;
using Org.OpenAPITools.Model;

namespace Org.OpenAPITools.Client
{
    /// <summary>
    /// Provides hosting configuration for Org.OpenAPITools
    /// </summary>
    public class HostConfiguration
    {
        private readonly IServiceCollection _services;
        private readonly JsonSerializerOptions _jsonOptions = new JsonSerializerOptions();

        internal bool HttpClientsAdded { get; private set; }

        /// <summary>
        /// Instantiates the class 
        /// </summary>
        /// <param name="services"></param>
        public HostConfiguration(IServiceCollection services)
        {
            _services = services;
            _jsonOptions.Converters.Add(new JsonStringEnumConverter());
            _jsonOptions.Converters.Add(new DateTimeJsonConverter());
            _jsonOptions.Converters.Add(new DateTimeNullableJsonConverter());
            _jsonOptions.Converters.Add(new DateOnlyJsonConverter());
            _jsonOptions.Converters.Add(new DateOnlyNullableJsonConverter());
            _jsonOptions.Converters.Add(new AssistantFileObjectJsonConverter());
            _jsonOptions.Converters.Add(new AssistantObjectJsonConverter());
            _jsonOptions.Converters.Add(new AssistantObjectToolsInnerJsonConverter());
            _jsonOptions.Converters.Add(new AssistantStreamEventJsonConverter());
            _jsonOptions.Converters.Add(new AssistantToolsCodeJsonConverter());
            _jsonOptions.Converters.Add(new AssistantToolsFunctionJsonConverter());
            _jsonOptions.Converters.Add(new AssistantToolsRetrievalJsonConverter());
            _jsonOptions.Converters.Add(new AssistantsApiNamedToolChoiceJsonConverter());
            _jsonOptions.Converters.Add(new AssistantsApiResponseFormatJsonConverter());
            _jsonOptions.Converters.Add(new AssistantsApiResponseFormatOptionJsonConverter());
            _jsonOptions.Converters.Add(new AssistantsApiToolChoiceOptionJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionFunctionCallOptionJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionFunctionsJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionMessageToolCallJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionMessageToolCallChunkJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionMessageToolCallChunkFunctionJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionMessageToolCallFunctionJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionNamedToolChoiceJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionNamedToolChoiceFunctionJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionRequestAssistantMessageJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionRequestAssistantMessageFunctionCallJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionRequestFunctionMessageJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionRequestMessageJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionRequestMessageContentPartJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionRequestMessageContentPartImageJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionRequestMessageContentPartImageImageUrlJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionRequestMessageContentPartTextJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionRequestSystemMessageJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionRequestToolMessageJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionRequestUserMessageJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionRequestUserMessageContentJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionResponseMessageJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionRoleJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionRoleNullableJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionStreamResponseDeltaJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionStreamResponseDeltaFunctionCallJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionTokenLogprobJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionTokenLogprobTopLogprobsInnerJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionToolJsonConverter());
            _jsonOptions.Converters.Add(new ChatCompletionToolChoiceOptionJsonConverter());
            _jsonOptions.Converters.Add(new CompletionUsageJsonConverter());
            _jsonOptions.Converters.Add(new CreateAssistantFileRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreateAssistantRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreateAssistantRequestModelJsonConverter());
            _jsonOptions.Converters.Add(new CreateChatCompletionFunctionResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreateChatCompletionFunctionResponseChoicesInnerJsonConverter());
            _jsonOptions.Converters.Add(new CreateChatCompletionRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreateChatCompletionRequestFunctionCallJsonConverter());
            _jsonOptions.Converters.Add(new CreateChatCompletionRequestModelJsonConverter());
            _jsonOptions.Converters.Add(new CreateChatCompletionRequestResponseFormatJsonConverter());
            _jsonOptions.Converters.Add(new CreateChatCompletionRequestStopJsonConverter());
            _jsonOptions.Converters.Add(new CreateChatCompletionResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreateChatCompletionResponseChoicesInnerJsonConverter());
            _jsonOptions.Converters.Add(new CreateChatCompletionResponseChoicesInnerLogprobsJsonConverter());
            _jsonOptions.Converters.Add(new CreateChatCompletionStreamResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreateChatCompletionStreamResponseChoicesInnerJsonConverter());
            _jsonOptions.Converters.Add(new CreateCompletionRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreateCompletionRequestModelJsonConverter());
            _jsonOptions.Converters.Add(new CreateCompletionRequestPromptJsonConverter());
            _jsonOptions.Converters.Add(new CreateCompletionRequestStopJsonConverter());
            _jsonOptions.Converters.Add(new CreateCompletionResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreateCompletionResponseChoicesInnerJsonConverter());
            _jsonOptions.Converters.Add(new CreateCompletionResponseChoicesInnerLogprobsJsonConverter());
            _jsonOptions.Converters.Add(new CreateEmbeddingRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreateEmbeddingRequestInputJsonConverter());
            _jsonOptions.Converters.Add(new CreateEmbeddingRequestModelJsonConverter());
            _jsonOptions.Converters.Add(new CreateEmbeddingResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreateEmbeddingResponseUsageJsonConverter());
            _jsonOptions.Converters.Add(new CreateFineTuningJobRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreateFineTuningJobRequestHyperparametersJsonConverter());
            _jsonOptions.Converters.Add(new CreateFineTuningJobRequestHyperparametersBatchSizeJsonConverter());
            _jsonOptions.Converters.Add(new CreateFineTuningJobRequestHyperparametersLearningRateMultiplierJsonConverter());
            _jsonOptions.Converters.Add(new CreateFineTuningJobRequestHyperparametersNEpochsJsonConverter());
            _jsonOptions.Converters.Add(new CreateFineTuningJobRequestIntegrationsInnerJsonConverter());
            _jsonOptions.Converters.Add(new CreateFineTuningJobRequestIntegrationsInnerWandbJsonConverter());
            _jsonOptions.Converters.Add(new CreateFineTuningJobRequestModelJsonConverter());
            _jsonOptions.Converters.Add(new CreateImageEditRequestModelJsonConverter());
            _jsonOptions.Converters.Add(new CreateImageRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreateImageRequestModelJsonConverter());
            _jsonOptions.Converters.Add(new CreateMessageRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreateModerationRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreateModerationRequestInputJsonConverter());
            _jsonOptions.Converters.Add(new CreateModerationRequestModelJsonConverter());
            _jsonOptions.Converters.Add(new CreateModerationResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreateModerationResponseResultsInnerJsonConverter());
            _jsonOptions.Converters.Add(new CreateModerationResponseResultsInnerCategoriesJsonConverter());
            _jsonOptions.Converters.Add(new CreateModerationResponseResultsInnerCategoryScoresJsonConverter());
            _jsonOptions.Converters.Add(new CreateRunRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreateRunRequestModelJsonConverter());
            _jsonOptions.Converters.Add(new CreateSpeechRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreateSpeechRequestModelJsonConverter());
            _jsonOptions.Converters.Add(new CreateThreadAndRunRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreateThreadAndRunRequestToolsInnerJsonConverter());
            _jsonOptions.Converters.Add(new CreateThreadRequestJsonConverter());
            _jsonOptions.Converters.Add(new CreateTranscription200ResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreateTranscriptionRequestModelJsonConverter());
            _jsonOptions.Converters.Add(new CreateTranscriptionResponseJsonJsonConverter());
            _jsonOptions.Converters.Add(new CreateTranscriptionResponseVerboseJsonJsonConverter());
            _jsonOptions.Converters.Add(new CreateTranslation200ResponseJsonConverter());
            _jsonOptions.Converters.Add(new CreateTranslationResponseJsonJsonConverter());
            _jsonOptions.Converters.Add(new CreateTranslationResponseVerboseJsonJsonConverter());
            _jsonOptions.Converters.Add(new DeleteAssistantFileResponseJsonConverter());
            _jsonOptions.Converters.Add(new DeleteAssistantResponseJsonConverter());
            _jsonOptions.Converters.Add(new DeleteFileResponseJsonConverter());
            _jsonOptions.Converters.Add(new DeleteMessageResponseJsonConverter());
            _jsonOptions.Converters.Add(new DeleteModelResponseJsonConverter());
            _jsonOptions.Converters.Add(new DeleteThreadResponseJsonConverter());
            _jsonOptions.Converters.Add(new DoneEventJsonConverter());
            _jsonOptions.Converters.Add(new EmbeddingJsonConverter());
            _jsonOptions.Converters.Add(new ErrorJsonConverter());
            _jsonOptions.Converters.Add(new ErrorEventJsonConverter());
            _jsonOptions.Converters.Add(new ErrorResponseJsonConverter());
            _jsonOptions.Converters.Add(new FineTuningIntegrationJsonConverter());
            _jsonOptions.Converters.Add(new FineTuningJobJsonConverter());
            _jsonOptions.Converters.Add(new FineTuningJobCheckpointJsonConverter());
            _jsonOptions.Converters.Add(new FineTuningJobCheckpointMetricsJsonConverter());
            _jsonOptions.Converters.Add(new FineTuningJobErrorJsonConverter());
            _jsonOptions.Converters.Add(new FineTuningJobEventJsonConverter());
            _jsonOptions.Converters.Add(new FineTuningJobHyperparametersJsonConverter());
            _jsonOptions.Converters.Add(new FineTuningJobHyperparametersNEpochsJsonConverter());
            _jsonOptions.Converters.Add(new FineTuningJobIntegrationsInnerJsonConverter());
            _jsonOptions.Converters.Add(new FunctionObjectJsonConverter());
            _jsonOptions.Converters.Add(new ImageJsonConverter());
            _jsonOptions.Converters.Add(new ImagesResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListAssistantFilesResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListAssistantsResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListFilesResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListFineTuningJobCheckpointsResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListFineTuningJobEventsResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListMessageFilesResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListMessagesResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListModelsResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListPaginatedFineTuningJobsResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListRunStepsResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListRunsResponseJsonConverter());
            _jsonOptions.Converters.Add(new ListThreadsResponseJsonConverter());
            _jsonOptions.Converters.Add(new MessageContentImageFileObjectJsonConverter());
            _jsonOptions.Converters.Add(new MessageContentImageFileObjectImageFileJsonConverter());
            _jsonOptions.Converters.Add(new MessageContentTextAnnotationsFileCitationObjectJsonConverter());
            _jsonOptions.Converters.Add(new MessageContentTextAnnotationsFileCitationObjectFileCitationJsonConverter());
            _jsonOptions.Converters.Add(new MessageContentTextAnnotationsFilePathObjectJsonConverter());
            _jsonOptions.Converters.Add(new MessageContentTextAnnotationsFilePathObjectFilePathJsonConverter());
            _jsonOptions.Converters.Add(new MessageContentTextObjectJsonConverter());
            _jsonOptions.Converters.Add(new MessageContentTextObjectTextJsonConverter());
            _jsonOptions.Converters.Add(new MessageContentTextObjectTextAnnotationsInnerJsonConverter());
            _jsonOptions.Converters.Add(new MessageDeltaContentImageFileObjectJsonConverter());
            _jsonOptions.Converters.Add(new MessageDeltaContentImageFileObjectImageFileJsonConverter());
            _jsonOptions.Converters.Add(new MessageDeltaContentTextAnnotationsFileCitationObjectJsonConverter());
            _jsonOptions.Converters.Add(new MessageDeltaContentTextAnnotationsFileCitationObjectFileCitationJsonConverter());
            _jsonOptions.Converters.Add(new MessageDeltaContentTextAnnotationsFilePathObjectJsonConverter());
            _jsonOptions.Converters.Add(new MessageDeltaContentTextAnnotationsFilePathObjectFilePathJsonConverter());
            _jsonOptions.Converters.Add(new MessageDeltaContentTextObjectJsonConverter());
            _jsonOptions.Converters.Add(new MessageDeltaContentTextObjectTextJsonConverter());
            _jsonOptions.Converters.Add(new MessageDeltaContentTextObjectTextAnnotationsInnerJsonConverter());
            _jsonOptions.Converters.Add(new MessageDeltaObjectJsonConverter());
            _jsonOptions.Converters.Add(new MessageDeltaObjectDeltaJsonConverter());
            _jsonOptions.Converters.Add(new MessageDeltaObjectDeltaContentInnerJsonConverter());
            _jsonOptions.Converters.Add(new MessageFileObjectJsonConverter());
            _jsonOptions.Converters.Add(new MessageObjectJsonConverter());
            _jsonOptions.Converters.Add(new MessageObjectContentInnerJsonConverter());
            _jsonOptions.Converters.Add(new MessageObjectIncompleteDetailsJsonConverter());
            _jsonOptions.Converters.Add(new MessageStreamEventJsonConverter());
            _jsonOptions.Converters.Add(new MessageStreamEventOneOfJsonConverter());
            _jsonOptions.Converters.Add(new MessageStreamEventOneOf1JsonConverter());
            _jsonOptions.Converters.Add(new MessageStreamEventOneOf2JsonConverter());
            _jsonOptions.Converters.Add(new MessageStreamEventOneOf3JsonConverter());
            _jsonOptions.Converters.Add(new MessageStreamEventOneOf4JsonConverter());
            _jsonOptions.Converters.Add(new ModelJsonConverter());
            _jsonOptions.Converters.Add(new ModifyAssistantRequestJsonConverter());
            _jsonOptions.Converters.Add(new ModifyMessageRequestJsonConverter());
            _jsonOptions.Converters.Add(new ModifyRunRequestJsonConverter());
            _jsonOptions.Converters.Add(new ModifyThreadRequestJsonConverter());
            _jsonOptions.Converters.Add(new OpenAIFileJsonConverter());
            _jsonOptions.Converters.Add(new RunCompletionUsageJsonConverter());
            _jsonOptions.Converters.Add(new RunObjectJsonConverter());
            _jsonOptions.Converters.Add(new RunObjectIncompleteDetailsJsonConverter());
            _jsonOptions.Converters.Add(new RunObjectLastErrorJsonConverter());
            _jsonOptions.Converters.Add(new RunObjectRequiredActionJsonConverter());
            _jsonOptions.Converters.Add(new RunObjectRequiredActionSubmitToolOutputsJsonConverter());
            _jsonOptions.Converters.Add(new RunStepCompletionUsageJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDeltaObjectJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDeltaObjectDeltaJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDeltaObjectDeltaStepDetailsJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDeltaStepDetailsMessageCreationObjectJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDeltaStepDetailsMessageCreationObjectMessageCreationJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDeltaStepDetailsToolCallsCodeObjectJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDeltaStepDetailsToolCallsCodeObjectCodeInterpreterJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDeltaStepDetailsToolCallsCodeObjectCodeInterpreterOutputsInnerJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDeltaStepDetailsToolCallsCodeOutputImageObjectJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDeltaStepDetailsToolCallsCodeOutputImageObjectImageJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDeltaStepDetailsToolCallsCodeOutputLogsObjectJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDeltaStepDetailsToolCallsFunctionObjectJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDeltaStepDetailsToolCallsFunctionObjectFunctionJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDeltaStepDetailsToolCallsObjectJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDeltaStepDetailsToolCallsObjectToolCallsInnerJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDeltaStepDetailsToolCallsRetrievalObjectJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDetailsMessageCreationObjectJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDetailsMessageCreationObjectMessageCreationJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDetailsToolCallsCodeObjectJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDetailsToolCallsCodeObjectCodeInterpreterJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDetailsToolCallsCodeObjectCodeInterpreterOutputsInnerJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDetailsToolCallsCodeOutputImageObjectJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDetailsToolCallsCodeOutputImageObjectImageJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDetailsToolCallsCodeOutputLogsObjectJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDetailsToolCallsFunctionObjectJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDetailsToolCallsFunctionObjectFunctionJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDetailsToolCallsObjectJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDetailsToolCallsObjectToolCallsInnerJsonConverter());
            _jsonOptions.Converters.Add(new RunStepDetailsToolCallsRetrievalObjectJsonConverter());
            _jsonOptions.Converters.Add(new RunStepObjectJsonConverter());
            _jsonOptions.Converters.Add(new RunStepObjectLastErrorJsonConverter());
            _jsonOptions.Converters.Add(new RunStepObjectStepDetailsJsonConverter());
            _jsonOptions.Converters.Add(new RunStepStreamEventJsonConverter());
            _jsonOptions.Converters.Add(new RunStepStreamEventOneOfJsonConverter());
            _jsonOptions.Converters.Add(new RunStepStreamEventOneOf1JsonConverter());
            _jsonOptions.Converters.Add(new RunStepStreamEventOneOf2JsonConverter());
            _jsonOptions.Converters.Add(new RunStepStreamEventOneOf3JsonConverter());
            _jsonOptions.Converters.Add(new RunStepStreamEventOneOf4JsonConverter());
            _jsonOptions.Converters.Add(new RunStepStreamEventOneOf5JsonConverter());
            _jsonOptions.Converters.Add(new RunStepStreamEventOneOf6JsonConverter());
            _jsonOptions.Converters.Add(new RunStreamEventJsonConverter());
            _jsonOptions.Converters.Add(new RunStreamEventOneOfJsonConverter());
            _jsonOptions.Converters.Add(new RunStreamEventOneOf1JsonConverter());
            _jsonOptions.Converters.Add(new RunStreamEventOneOf2JsonConverter());
            _jsonOptions.Converters.Add(new RunStreamEventOneOf3JsonConverter());
            _jsonOptions.Converters.Add(new RunStreamEventOneOf4JsonConverter());
            _jsonOptions.Converters.Add(new RunStreamEventOneOf5JsonConverter());
            _jsonOptions.Converters.Add(new RunStreamEventOneOf6JsonConverter());
            _jsonOptions.Converters.Add(new RunStreamEventOneOf7JsonConverter());
            _jsonOptions.Converters.Add(new RunStreamEventOneOf8JsonConverter());
            _jsonOptions.Converters.Add(new RunToolCallObjectJsonConverter());
            _jsonOptions.Converters.Add(new RunToolCallObjectFunctionJsonConverter());
            _jsonOptions.Converters.Add(new SubmitToolOutputsRunRequestJsonConverter());
            _jsonOptions.Converters.Add(new SubmitToolOutputsRunRequestToolOutputsInnerJsonConverter());
            _jsonOptions.Converters.Add(new ThreadObjectJsonConverter());
            _jsonOptions.Converters.Add(new ThreadStreamEventJsonConverter());
            _jsonOptions.Converters.Add(new TranscriptionSegmentJsonConverter());
            _jsonOptions.Converters.Add(new TranscriptionWordJsonConverter());
            _jsonOptions.Converters.Add(new TruncationObjectJsonConverter());
            JsonSerializerOptionsProvider jsonSerializerOptionsProvider = new(_jsonOptions);
            _services.AddSingleton(jsonSerializerOptionsProvider);
            _services.AddSingleton<IApiFactory, ApiFactory>();
            _services.AddSingleton<AssistantsApiEvents>();
            _services.AddSingleton<AudioApiEvents>();
            _services.AddSingleton<ChatApiEvents>();
            _services.AddSingleton<CompletionsApiEvents>();
            _services.AddSingleton<EmbeddingsApiEvents>();
            _services.AddSingleton<FilesApiEvents>();
            _services.AddSingleton<FineTuningApiEvents>();
            _services.AddSingleton<ImagesApiEvents>();
            _services.AddSingleton<ModelsApiEvents>();
            _services.AddSingleton<ModerationsApiEvents>();
        }

        /// <summary>
        /// Configures the HttpClients.
        /// </summary>
        /// <param name="client"></param>
        /// <param name="builder"></param>
        /// <returns></returns>
        public HostConfiguration AddApiHttpClients
        (
            Action<HttpClient>? client = null, Action<IHttpClientBuilder>? builder = null)
        {
            if (client == null)
                client = c => c.BaseAddress = new Uri(ClientUtils.BASE_ADDRESS);

            List<IHttpClientBuilder> builders = new List<IHttpClientBuilder>();

            builders.Add(_services.AddHttpClient<IAssistantsApi, AssistantsApi>(client));
            builders.Add(_services.AddHttpClient<IAudioApi, AudioApi>(client));
            builders.Add(_services.AddHttpClient<IChatApi, ChatApi>(client));
            builders.Add(_services.AddHttpClient<ICompletionsApi, CompletionsApi>(client));
            builders.Add(_services.AddHttpClient<IEmbeddingsApi, EmbeddingsApi>(client));
            builders.Add(_services.AddHttpClient<IFilesApi, FilesApi>(client));
            builders.Add(_services.AddHttpClient<IFineTuningApi, FineTuningApi>(client));
            builders.Add(_services.AddHttpClient<IImagesApi, ImagesApi>(client));
            builders.Add(_services.AddHttpClient<IModelsApi, ModelsApi>(client));
            builders.Add(_services.AddHttpClient<IModerationsApi, ModerationsApi>(client));
            
            if (builder != null)
                foreach (IHttpClientBuilder instance in builders)
                    builder(instance);

            HttpClientsAdded = true;

            return this;
        }

        /// <summary>
        /// Configures the JsonSerializerSettings
        /// </summary>
        /// <param name="options"></param>
        /// <returns></returns>
        public HostConfiguration ConfigureJsonOptions(Action<JsonSerializerOptions> options)
        {
            options(_jsonOptions);

            return this;
        }

        /// <summary>
        /// Adds tokens to your IServiceCollection
        /// </summary>
        /// <typeparam name="TTokenBase"></typeparam>
        /// <param name="token"></param>
        /// <returns></returns>
        public HostConfiguration AddTokens<TTokenBase>(TTokenBase token) where TTokenBase : TokenBase
        {
            return AddTokens(new TTokenBase[]{ token });
        }

        /// <summary>
        /// Adds tokens to your IServiceCollection
        /// </summary>
        /// <typeparam name="TTokenBase"></typeparam>
        /// <param name="tokens"></param>
        /// <returns></returns>
        public HostConfiguration AddTokens<TTokenBase>(IEnumerable<TTokenBase> tokens) where TTokenBase : TokenBase
        {
            TokenContainer<TTokenBase> container = new TokenContainer<TTokenBase>(tokens);
            _services.AddSingleton(services => container);

            return this;
        }

        /// <summary>
        /// Adds a token provider to your IServiceCollection
        /// </summary>
        /// <typeparam name="TTokenProvider"></typeparam>
        /// <typeparam name="TTokenBase"></typeparam>
        /// <returns></returns>
        public HostConfiguration UseProvider<TTokenProvider, TTokenBase>() 
            where TTokenProvider : TokenProvider<TTokenBase>
            where TTokenBase : TokenBase
        {
            _services.AddSingleton<TTokenProvider>();
            _services.AddSingleton<TokenProvider<TTokenBase>>(services => services.GetRequiredService<TTokenProvider>());

            return this;
        }
    }
}
