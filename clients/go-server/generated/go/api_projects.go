// Code generated by OpenAPI Generator (https://openapi-generator.tech); DO NOT EDIT.

/*
 * OpenAI API
 *
 * The OpenAI REST API. Please see https://platform.openai.com/docs/api-reference for more details.
 *
 * API version: 2.3.0
 * Contact: blah+oapicf@cliffano.com
 */

package openapi

import (
	"encoding/json"
	"net/http"
	"strings"

	"github.com/gorilla/mux"
)

// ProjectsAPIController binds http requests to an api service and writes the service results to the http response
type ProjectsAPIController struct {
	service ProjectsAPIServicer
	errorHandler ErrorHandler
}

// ProjectsAPIOption for how the controller is set up.
type ProjectsAPIOption func(*ProjectsAPIController)

// WithProjectsAPIErrorHandler inject ErrorHandler into controller
func WithProjectsAPIErrorHandler(h ErrorHandler) ProjectsAPIOption {
	return func(c *ProjectsAPIController) {
		c.errorHandler = h
	}
}

// NewProjectsAPIController creates a default api controller
func NewProjectsAPIController(s ProjectsAPIServicer, opts ...ProjectsAPIOption) *ProjectsAPIController {
	controller := &ProjectsAPIController{
		service:      s,
		errorHandler: DefaultErrorHandler,
	}

	for _, opt := range opts {
		opt(controller)
	}

	return controller
}

// Routes returns all the api routes for the ProjectsAPIController
func (c *ProjectsAPIController) Routes() Routes {
	return Routes{
		"ListProjects": Route{
			"ListProjects",
			strings.ToUpper("Get"),
			"/v1/organization/projects",
			c.ListProjects,
		},
		"CreateProject": Route{
			"CreateProject",
			strings.ToUpper("Post"),
			"/v1/organization/projects",
			c.CreateProject,
		},
		"RetrieveProject": Route{
			"RetrieveProject",
			strings.ToUpper("Get"),
			"/v1/organization/projects/{project_id}",
			c.RetrieveProject,
		},
		"ModifyProject": Route{
			"ModifyProject",
			strings.ToUpper("Post"),
			"/v1/organization/projects/{project_id}",
			c.ModifyProject,
		},
		"ListProjectApiKeys": Route{
			"ListProjectApiKeys",
			strings.ToUpper("Get"),
			"/v1/organization/projects/{project_id}/api_keys",
			c.ListProjectApiKeys,
		},
		"RetrieveProjectApiKey": Route{
			"RetrieveProjectApiKey",
			strings.ToUpper("Get"),
			"/v1/organization/projects/{project_id}/api_keys/{key_id}",
			c.RetrieveProjectApiKey,
		},
		"DeleteProjectApiKey": Route{
			"DeleteProjectApiKey",
			strings.ToUpper("Delete"),
			"/v1/organization/projects/{project_id}/api_keys/{key_id}",
			c.DeleteProjectApiKey,
		},
		"ArchiveProject": Route{
			"ArchiveProject",
			strings.ToUpper("Post"),
			"/v1/organization/projects/{project_id}/archive",
			c.ArchiveProject,
		},
		"ListProjectRateLimits": Route{
			"ListProjectRateLimits",
			strings.ToUpper("Get"),
			"/v1/organization/projects/{project_id}/rate_limits",
			c.ListProjectRateLimits,
		},
		"UpdateProjectRateLimits": Route{
			"UpdateProjectRateLimits",
			strings.ToUpper("Post"),
			"/v1/organization/projects/{project_id}/rate_limits/{rate_limit_id}",
			c.UpdateProjectRateLimits,
		},
		"ListProjectServiceAccounts": Route{
			"ListProjectServiceAccounts",
			strings.ToUpper("Get"),
			"/v1/organization/projects/{project_id}/service_accounts",
			c.ListProjectServiceAccounts,
		},
		"CreateProjectServiceAccount": Route{
			"CreateProjectServiceAccount",
			strings.ToUpper("Post"),
			"/v1/organization/projects/{project_id}/service_accounts",
			c.CreateProjectServiceAccount,
		},
		"RetrieveProjectServiceAccount": Route{
			"RetrieveProjectServiceAccount",
			strings.ToUpper("Get"),
			"/v1/organization/projects/{project_id}/service_accounts/{service_account_id}",
			c.RetrieveProjectServiceAccount,
		},
		"DeleteProjectServiceAccount": Route{
			"DeleteProjectServiceAccount",
			strings.ToUpper("Delete"),
			"/v1/organization/projects/{project_id}/service_accounts/{service_account_id}",
			c.DeleteProjectServiceAccount,
		},
		"ListProjectUsers": Route{
			"ListProjectUsers",
			strings.ToUpper("Get"),
			"/v1/organization/projects/{project_id}/users",
			c.ListProjectUsers,
		},
		"CreateProjectUser": Route{
			"CreateProjectUser",
			strings.ToUpper("Post"),
			"/v1/organization/projects/{project_id}/users",
			c.CreateProjectUser,
		},
		"RetrieveProjectUser": Route{
			"RetrieveProjectUser",
			strings.ToUpper("Get"),
			"/v1/organization/projects/{project_id}/users/{user_id}",
			c.RetrieveProjectUser,
		},
		"ModifyProjectUser": Route{
			"ModifyProjectUser",
			strings.ToUpper("Post"),
			"/v1/organization/projects/{project_id}/users/{user_id}",
			c.ModifyProjectUser,
		},
		"DeleteProjectUser": Route{
			"DeleteProjectUser",
			strings.ToUpper("Delete"),
			"/v1/organization/projects/{project_id}/users/{user_id}",
			c.DeleteProjectUser,
		},
	}
}

// OrderedRoutes returns all the api routes in a deterministic order for the ProjectsAPIController
func (c *ProjectsAPIController) OrderedRoutes() []Route {
	return []Route{
		Route{
			"ListProjects",
			strings.ToUpper("Get"),
			"/v1/organization/projects",
			c.ListProjects,
		},
		Route{
			"CreateProject",
			strings.ToUpper("Post"),
			"/v1/organization/projects",
			c.CreateProject,
		},
		Route{
			"RetrieveProject",
			strings.ToUpper("Get"),
			"/v1/organization/projects/{project_id}",
			c.RetrieveProject,
		},
		Route{
			"ModifyProject",
			strings.ToUpper("Post"),
			"/v1/organization/projects/{project_id}",
			c.ModifyProject,
		},
		Route{
			"ListProjectApiKeys",
			strings.ToUpper("Get"),
			"/v1/organization/projects/{project_id}/api_keys",
			c.ListProjectApiKeys,
		},
		Route{
			"RetrieveProjectApiKey",
			strings.ToUpper("Get"),
			"/v1/organization/projects/{project_id}/api_keys/{key_id}",
			c.RetrieveProjectApiKey,
		},
		Route{
			"DeleteProjectApiKey",
			strings.ToUpper("Delete"),
			"/v1/organization/projects/{project_id}/api_keys/{key_id}",
			c.DeleteProjectApiKey,
		},
		Route{
			"ArchiveProject",
			strings.ToUpper("Post"),
			"/v1/organization/projects/{project_id}/archive",
			c.ArchiveProject,
		},
		Route{
			"ListProjectRateLimits",
			strings.ToUpper("Get"),
			"/v1/organization/projects/{project_id}/rate_limits",
			c.ListProjectRateLimits,
		},
		Route{
			"UpdateProjectRateLimits",
			strings.ToUpper("Post"),
			"/v1/organization/projects/{project_id}/rate_limits/{rate_limit_id}",
			c.UpdateProjectRateLimits,
		},
		Route{
			"ListProjectServiceAccounts",
			strings.ToUpper("Get"),
			"/v1/organization/projects/{project_id}/service_accounts",
			c.ListProjectServiceAccounts,
		},
		Route{
			"CreateProjectServiceAccount",
			strings.ToUpper("Post"),
			"/v1/organization/projects/{project_id}/service_accounts",
			c.CreateProjectServiceAccount,
		},
		Route{
			"RetrieveProjectServiceAccount",
			strings.ToUpper("Get"),
			"/v1/organization/projects/{project_id}/service_accounts/{service_account_id}",
			c.RetrieveProjectServiceAccount,
		},
		Route{
			"DeleteProjectServiceAccount",
			strings.ToUpper("Delete"),
			"/v1/organization/projects/{project_id}/service_accounts/{service_account_id}",
			c.DeleteProjectServiceAccount,
		},
		Route{
			"ListProjectUsers",
			strings.ToUpper("Get"),
			"/v1/organization/projects/{project_id}/users",
			c.ListProjectUsers,
		},
		Route{
			"CreateProjectUser",
			strings.ToUpper("Post"),
			"/v1/organization/projects/{project_id}/users",
			c.CreateProjectUser,
		},
		Route{
			"RetrieveProjectUser",
			strings.ToUpper("Get"),
			"/v1/organization/projects/{project_id}/users/{user_id}",
			c.RetrieveProjectUser,
		},
		Route{
			"ModifyProjectUser",
			strings.ToUpper("Post"),
			"/v1/organization/projects/{project_id}/users/{user_id}",
			c.ModifyProjectUser,
		},
		Route{
			"DeleteProjectUser",
			strings.ToUpper("Delete"),
			"/v1/organization/projects/{project_id}/users/{user_id}",
			c.DeleteProjectUser,
		},
	}
}



// ListProjects - Returns a list of projects.
func (c *ProjectsAPIController) ListProjects(w http.ResponseWriter, r *http.Request) {
	query, err := parseQuery(r.URL.RawQuery)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	var limitParam int32
	if query.Has("limit") {
		param, err := parseNumericParameter[int32](
			query.Get("limit"),
			WithParse[int32](parseInt32),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "limit", Err: err}, nil)
			return
		}

		limitParam = param
	} else {
		var param int32 = 20
		limitParam = param
	}
	var afterParam string
	if query.Has("after") {
		param := query.Get("after")

		afterParam = param
	} else {
	}
	var includeArchivedParam bool
	if query.Has("include_archived") {
		param, err := parseBoolParameter(
			query.Get("include_archived"),
			WithParse[bool](parseBool),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "include_archived", Err: err}, nil)
			return
		}

		includeArchivedParam = param
	} else {
		var param bool = false
		includeArchivedParam = param
	}
	result, err := c.service.ListProjects(r.Context(), limitParam, afterParam, includeArchivedParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// CreateProject - Create a new project in the organization. Projects can be created and archived, but cannot be deleted.
func (c *ProjectsAPIController) CreateProject(w http.ResponseWriter, r *http.Request) {
	var projectCreateRequestParam ProjectCreateRequest
	d := json.NewDecoder(r.Body)
	d.DisallowUnknownFields()
	if err := d.Decode(&projectCreateRequestParam); err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	if err := AssertProjectCreateRequestRequired(projectCreateRequestParam); err != nil {
		c.errorHandler(w, r, err, nil)
		return
	}
	if err := AssertProjectCreateRequestConstraints(projectCreateRequestParam); err != nil {
		c.errorHandler(w, r, err, nil)
		return
	}
	result, err := c.service.CreateProject(r.Context(), projectCreateRequestParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// RetrieveProject - Retrieves a project.
func (c *ProjectsAPIController) RetrieveProject(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	projectIdParam := params["project_id"]
	if projectIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"project_id"}, nil)
		return
	}
	result, err := c.service.RetrieveProject(r.Context(), projectIdParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// ModifyProject - Modifies a project in the organization.
func (c *ProjectsAPIController) ModifyProject(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	projectIdParam := params["project_id"]
	if projectIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"project_id"}, nil)
		return
	}
	var projectUpdateRequestParam ProjectUpdateRequest
	d := json.NewDecoder(r.Body)
	d.DisallowUnknownFields()
	if err := d.Decode(&projectUpdateRequestParam); err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	if err := AssertProjectUpdateRequestRequired(projectUpdateRequestParam); err != nil {
		c.errorHandler(w, r, err, nil)
		return
	}
	if err := AssertProjectUpdateRequestConstraints(projectUpdateRequestParam); err != nil {
		c.errorHandler(w, r, err, nil)
		return
	}
	result, err := c.service.ModifyProject(r.Context(), projectIdParam, projectUpdateRequestParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// ListProjectApiKeys - Returns a list of API keys in the project.
func (c *ProjectsAPIController) ListProjectApiKeys(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	query, err := parseQuery(r.URL.RawQuery)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	projectIdParam := params["project_id"]
	if projectIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"project_id"}, nil)
		return
	}
	var limitParam int32
	if query.Has("limit") {
		param, err := parseNumericParameter[int32](
			query.Get("limit"),
			WithParse[int32](parseInt32),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "limit", Err: err}, nil)
			return
		}

		limitParam = param
	} else {
		var param int32 = 20
		limitParam = param
	}
	var afterParam string
	if query.Has("after") {
		param := query.Get("after")

		afterParam = param
	} else {
	}
	result, err := c.service.ListProjectApiKeys(r.Context(), projectIdParam, limitParam, afterParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// RetrieveProjectApiKey - Retrieves an API key in the project.
func (c *ProjectsAPIController) RetrieveProjectApiKey(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	projectIdParam := params["project_id"]
	if projectIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"project_id"}, nil)
		return
	}
	keyIdParam := params["key_id"]
	if keyIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"key_id"}, nil)
		return
	}
	result, err := c.service.RetrieveProjectApiKey(r.Context(), projectIdParam, keyIdParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// DeleteProjectApiKey - Deletes an API key from the project.
func (c *ProjectsAPIController) DeleteProjectApiKey(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	projectIdParam := params["project_id"]
	if projectIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"project_id"}, nil)
		return
	}
	keyIdParam := params["key_id"]
	if keyIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"key_id"}, nil)
		return
	}
	result, err := c.service.DeleteProjectApiKey(r.Context(), projectIdParam, keyIdParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// ArchiveProject - Archives a project in the organization. Archived projects cannot be used or updated.
func (c *ProjectsAPIController) ArchiveProject(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	projectIdParam := params["project_id"]
	if projectIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"project_id"}, nil)
		return
	}
	result, err := c.service.ArchiveProject(r.Context(), projectIdParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// ListProjectRateLimits - Returns the rate limits per model for a project.
func (c *ProjectsAPIController) ListProjectRateLimits(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	query, err := parseQuery(r.URL.RawQuery)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	projectIdParam := params["project_id"]
	if projectIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"project_id"}, nil)
		return
	}
	var limitParam int32
	if query.Has("limit") {
		param, err := parseNumericParameter[int32](
			query.Get("limit"),
			WithParse[int32](parseInt32),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "limit", Err: err}, nil)
			return
		}

		limitParam = param
	} else {
		var param int32 = 100
		limitParam = param
	}
	var afterParam string
	if query.Has("after") {
		param := query.Get("after")

		afterParam = param
	} else {
	}
	var beforeParam string
	if query.Has("before") {
		param := query.Get("before")

		beforeParam = param
	} else {
	}
	result, err := c.service.ListProjectRateLimits(r.Context(), projectIdParam, limitParam, afterParam, beforeParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// UpdateProjectRateLimits - Updates a project rate limit.
func (c *ProjectsAPIController) UpdateProjectRateLimits(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	projectIdParam := params["project_id"]
	if projectIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"project_id"}, nil)
		return
	}
	rateLimitIdParam := params["rate_limit_id"]
	if rateLimitIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"rate_limit_id"}, nil)
		return
	}
	var projectRateLimitUpdateRequestParam ProjectRateLimitUpdateRequest
	d := json.NewDecoder(r.Body)
	d.DisallowUnknownFields()
	if err := d.Decode(&projectRateLimitUpdateRequestParam); err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	if err := AssertProjectRateLimitUpdateRequestRequired(projectRateLimitUpdateRequestParam); err != nil {
		c.errorHandler(w, r, err, nil)
		return
	}
	if err := AssertProjectRateLimitUpdateRequestConstraints(projectRateLimitUpdateRequestParam); err != nil {
		c.errorHandler(w, r, err, nil)
		return
	}
	result, err := c.service.UpdateProjectRateLimits(r.Context(), projectIdParam, rateLimitIdParam, projectRateLimitUpdateRequestParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// ListProjectServiceAccounts - Returns a list of service accounts in the project.
func (c *ProjectsAPIController) ListProjectServiceAccounts(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	query, err := parseQuery(r.URL.RawQuery)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	projectIdParam := params["project_id"]
	if projectIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"project_id"}, nil)
		return
	}
	var limitParam int32
	if query.Has("limit") {
		param, err := parseNumericParameter[int32](
			query.Get("limit"),
			WithParse[int32](parseInt32),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "limit", Err: err}, nil)
			return
		}

		limitParam = param
	} else {
		var param int32 = 20
		limitParam = param
	}
	var afterParam string
	if query.Has("after") {
		param := query.Get("after")

		afterParam = param
	} else {
	}
	result, err := c.service.ListProjectServiceAccounts(r.Context(), projectIdParam, limitParam, afterParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// CreateProjectServiceAccount - Creates a new service account in the project. This also returns an unredacted API key for the service account.
func (c *ProjectsAPIController) CreateProjectServiceAccount(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	projectIdParam := params["project_id"]
	if projectIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"project_id"}, nil)
		return
	}
	var projectServiceAccountCreateRequestParam ProjectServiceAccountCreateRequest
	d := json.NewDecoder(r.Body)
	d.DisallowUnknownFields()
	if err := d.Decode(&projectServiceAccountCreateRequestParam); err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	if err := AssertProjectServiceAccountCreateRequestRequired(projectServiceAccountCreateRequestParam); err != nil {
		c.errorHandler(w, r, err, nil)
		return
	}
	if err := AssertProjectServiceAccountCreateRequestConstraints(projectServiceAccountCreateRequestParam); err != nil {
		c.errorHandler(w, r, err, nil)
		return
	}
	result, err := c.service.CreateProjectServiceAccount(r.Context(), projectIdParam, projectServiceAccountCreateRequestParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// RetrieveProjectServiceAccount - Retrieves a service account in the project.
func (c *ProjectsAPIController) RetrieveProjectServiceAccount(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	projectIdParam := params["project_id"]
	if projectIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"project_id"}, nil)
		return
	}
	serviceAccountIdParam := params["service_account_id"]
	if serviceAccountIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"service_account_id"}, nil)
		return
	}
	result, err := c.service.RetrieveProjectServiceAccount(r.Context(), projectIdParam, serviceAccountIdParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// DeleteProjectServiceAccount - Deletes a service account from the project.
func (c *ProjectsAPIController) DeleteProjectServiceAccount(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	projectIdParam := params["project_id"]
	if projectIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"project_id"}, nil)
		return
	}
	serviceAccountIdParam := params["service_account_id"]
	if serviceAccountIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"service_account_id"}, nil)
		return
	}
	result, err := c.service.DeleteProjectServiceAccount(r.Context(), projectIdParam, serviceAccountIdParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// ListProjectUsers - Returns a list of users in the project.
func (c *ProjectsAPIController) ListProjectUsers(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	query, err := parseQuery(r.URL.RawQuery)
	if err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	projectIdParam := params["project_id"]
	if projectIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"project_id"}, nil)
		return
	}
	var limitParam int32
	if query.Has("limit") {
		param, err := parseNumericParameter[int32](
			query.Get("limit"),
			WithParse[int32](parseInt32),
		)
		if err != nil {
			c.errorHandler(w, r, &ParsingError{Param: "limit", Err: err}, nil)
			return
		}

		limitParam = param
	} else {
		var param int32 = 20
		limitParam = param
	}
	var afterParam string
	if query.Has("after") {
		param := query.Get("after")

		afterParam = param
	} else {
	}
	result, err := c.service.ListProjectUsers(r.Context(), projectIdParam, limitParam, afterParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// CreateProjectUser - Adds a user to the project. Users must already be members of the organization to be added to a project.
func (c *ProjectsAPIController) CreateProjectUser(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	projectIdParam := params["project_id"]
	if projectIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"project_id"}, nil)
		return
	}
	var projectUserCreateRequestParam ProjectUserCreateRequest
	d := json.NewDecoder(r.Body)
	d.DisallowUnknownFields()
	if err := d.Decode(&projectUserCreateRequestParam); err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	if err := AssertProjectUserCreateRequestRequired(projectUserCreateRequestParam); err != nil {
		c.errorHandler(w, r, err, nil)
		return
	}
	if err := AssertProjectUserCreateRequestConstraints(projectUserCreateRequestParam); err != nil {
		c.errorHandler(w, r, err, nil)
		return
	}
	result, err := c.service.CreateProjectUser(r.Context(), projectIdParam, projectUserCreateRequestParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// RetrieveProjectUser - Retrieves a user in the project.
func (c *ProjectsAPIController) RetrieveProjectUser(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	projectIdParam := params["project_id"]
	if projectIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"project_id"}, nil)
		return
	}
	userIdParam := params["user_id"]
	if userIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"user_id"}, nil)
		return
	}
	result, err := c.service.RetrieveProjectUser(r.Context(), projectIdParam, userIdParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// ModifyProjectUser - Modifies a user's role in the project.
func (c *ProjectsAPIController) ModifyProjectUser(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	projectIdParam := params["project_id"]
	if projectIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"project_id"}, nil)
		return
	}
	userIdParam := params["user_id"]
	if userIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"user_id"}, nil)
		return
	}
	var projectUserUpdateRequestParam ProjectUserUpdateRequest
	d := json.NewDecoder(r.Body)
	d.DisallowUnknownFields()
	if err := d.Decode(&projectUserUpdateRequestParam); err != nil {
		c.errorHandler(w, r, &ParsingError{Err: err}, nil)
		return
	}
	if err := AssertProjectUserUpdateRequestRequired(projectUserUpdateRequestParam); err != nil {
		c.errorHandler(w, r, err, nil)
		return
	}
	if err := AssertProjectUserUpdateRequestConstraints(projectUserUpdateRequestParam); err != nil {
		c.errorHandler(w, r, err, nil)
		return
	}
	result, err := c.service.ModifyProjectUser(r.Context(), projectIdParam, userIdParam, projectUserUpdateRequestParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}

// DeleteProjectUser - Deletes a user from the project.
func (c *ProjectsAPIController) DeleteProjectUser(w http.ResponseWriter, r *http.Request) {
	params := mux.Vars(r)
	projectIdParam := params["project_id"]
	if projectIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"project_id"}, nil)
		return
	}
	userIdParam := params["user_id"]
	if userIdParam == "" {
		c.errorHandler(w, r, &RequiredError{"user_id"}, nil)
		return
	}
	result, err := c.service.DeleteProjectUser(r.Context(), projectIdParam, userIdParam)
	// If an error occurred, encode the error with the status code
	if err != nil {
		c.errorHandler(w, r, err, &result)
		return
	}
	// If no error, encode the body and the result code
	_ = EncodeJSONResponse(result.Body, &result.Code, w)
}
