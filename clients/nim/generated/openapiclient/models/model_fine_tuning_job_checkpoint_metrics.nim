#
# OpenAI API
# 
# The OpenAI REST API. Please see https://platform.openai.com/docs/api-reference for more details.
# The version of the OpenAPI document: 2.0.0
# Contact: blah+oapicf@cliffano.com
# Generated by: https://openapi-generator.tech
#

import json
import tables
import marshal
import options


type FineTuningJobCheckpointMetrics* = object
  ## Metrics at the step number during the fine-tuning job.
  step*: Option[float]
  trainLoss*: Option[float]
  trainMeanTokenAccuracy*: Option[float]
  validLoss*: Option[float]
  validMeanTokenAccuracy*: Option[float]
  fullValidLoss*: Option[float]
  fullValidMeanTokenAccuracy*: Option[float]


# Custom JSON deserialization for FineTuningJobCheckpointMetrics with custom field names
proc to*(node: JsonNode, T: typedesc[FineTuningJobCheckpointMetrics]): FineTuningJobCheckpointMetrics =
  result = FineTuningJobCheckpointMetrics()
  if node.kind == JObject:
    if node.hasKey("step") and node["step"].kind != JNull:
      result.step = some(to(node["step"], typeof(result.step.get())))
    if node.hasKey("train_loss") and node["train_loss"].kind != JNull:
      result.trainLoss = some(to(node["train_loss"], typeof(result.trainLoss.get())))
    if node.hasKey("train_mean_token_accuracy") and node["train_mean_token_accuracy"].kind != JNull:
      result.trainMeanTokenAccuracy = some(to(node["train_mean_token_accuracy"], typeof(result.trainMeanTokenAccuracy.get())))
    if node.hasKey("valid_loss") and node["valid_loss"].kind != JNull:
      result.validLoss = some(to(node["valid_loss"], typeof(result.validLoss.get())))
    if node.hasKey("valid_mean_token_accuracy") and node["valid_mean_token_accuracy"].kind != JNull:
      result.validMeanTokenAccuracy = some(to(node["valid_mean_token_accuracy"], typeof(result.validMeanTokenAccuracy.get())))
    if node.hasKey("full_valid_loss") and node["full_valid_loss"].kind != JNull:
      result.fullValidLoss = some(to(node["full_valid_loss"], typeof(result.fullValidLoss.get())))
    if node.hasKey("full_valid_mean_token_accuracy") and node["full_valid_mean_token_accuracy"].kind != JNull:
      result.fullValidMeanTokenAccuracy = some(to(node["full_valid_mean_token_accuracy"], typeof(result.fullValidMeanTokenAccuracy.get())))

# Custom JSON serialization for FineTuningJobCheckpointMetrics with custom field names
proc `%`*(obj: FineTuningJobCheckpointMetrics): JsonNode =
  result = newJObject()
  if obj.step.isSome():
    result["step"] = %obj.step.get()
  if obj.trainLoss.isSome():
    result["train_loss"] = %obj.trainLoss.get()
  if obj.trainMeanTokenAccuracy.isSome():
    result["train_mean_token_accuracy"] = %obj.trainMeanTokenAccuracy.get()
  if obj.validLoss.isSome():
    result["valid_loss"] = %obj.validLoss.get()
  if obj.validMeanTokenAccuracy.isSome():
    result["valid_mean_token_accuracy"] = %obj.validMeanTokenAccuracy.get()
  if obj.fullValidLoss.isSome():
    result["full_valid_loss"] = %obj.fullValidLoss.get()
  if obj.fullValidMeanTokenAccuracy.isSome():
    result["full_valid_mean_token_accuracy"] = %obj.fullValidMeanTokenAccuracy.get()

