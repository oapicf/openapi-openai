#
# OpenAI API
# 
# The OpenAI REST API. Please see https://platform.openai.com/docs/api-reference for more details.
# The version of the OpenAPI document: 2.3.0
# Contact: blah+oapicf@cliffano.com
# Generated by: https://openapi-generator.tech
#

import json
import tables
import marshal
import options


type `Object`* {.pure.} = enum
  ProjectRateLimit

type ProjectRateLimit* = object
  ## Represents a project rate limit config.
  `object`*: `Object` ## The object type, which is always `project.rate_limit`
  id*: string ## The identifier, which can be referenced in API endpoints.
  model*: string ## The model this rate limit applies to.
  maxRequestsPer1Minute*: int ## The maximum requests per minute.
  maxTokensPer1Minute*: int ## The maximum tokens per minute.
  maxImagesPer1Minute*: Option[int] ## The maximum images per minute. Only present for relevant models.
  maxAudioMegabytesPer1Minute*: Option[int] ## The maximum audio megabytes per minute. Only present for relevant models.
  maxRequestsPer1Day*: Option[int] ## The maximum requests per day. Only present for relevant models.
  batch1DayMaxInputTokens*: Option[int] ## The maximum batch input tokens per day. Only present for relevant models.

func `%`*(v: `Object`): JsonNode =
  result = case v:
    of `Object`.ProjectRateLimit: %"project.rate_limit"
func `$`*(v: `Object`): string =
  result = case v:
    of `Object`.ProjectRateLimit: $("project.rate_limit")

proc to*(node: JsonNode, T: typedesc[`Object`]): `Object` =
  if node.kind != JString:
    raise newException(ValueError, "Expected string for enum `Object`, got " & $node.kind)
  let strVal = node.getStr()
  case strVal:
  of $("project.rate_limit"):
    return `Object`.ProjectRateLimit
  else:
    raise newException(ValueError, "Invalid enum value for `Object`: " & strVal)


# Custom JSON deserialization for ProjectRateLimit with custom field names
proc to*(node: JsonNode, T: typedesc[ProjectRateLimit]): ProjectRateLimit =
  result = ProjectRateLimit()
  if node.kind == JObject:
    if node.hasKey("object"):
      result.`object` = to(node["object"], `Object`)
    if node.hasKey("id"):
      result.id = to(node["id"], string)
    if node.hasKey("model"):
      result.model = to(node["model"], string)
    if node.hasKey("max_requests_per_1_minute"):
      result.maxRequestsPer1Minute = to(node["max_requests_per_1_minute"], int)
    if node.hasKey("max_tokens_per_1_minute"):
      result.maxTokensPer1Minute = to(node["max_tokens_per_1_minute"], int)
    if node.hasKey("max_images_per_1_minute") and node["max_images_per_1_minute"].kind != JNull:
      result.maxImagesPer1Minute = some(to(node["max_images_per_1_minute"], typeof(result.maxImagesPer1Minute.get())))
    if node.hasKey("max_audio_megabytes_per_1_minute") and node["max_audio_megabytes_per_1_minute"].kind != JNull:
      result.maxAudioMegabytesPer1Minute = some(to(node["max_audio_megabytes_per_1_minute"], typeof(result.maxAudioMegabytesPer1Minute.get())))
    if node.hasKey("max_requests_per_1_day") and node["max_requests_per_1_day"].kind != JNull:
      result.maxRequestsPer1Day = some(to(node["max_requests_per_1_day"], typeof(result.maxRequestsPer1Day.get())))
    if node.hasKey("batch_1_day_max_input_tokens") and node["batch_1_day_max_input_tokens"].kind != JNull:
      result.batch1DayMaxInputTokens = some(to(node["batch_1_day_max_input_tokens"], typeof(result.batch1DayMaxInputTokens.get())))

# Custom JSON serialization for ProjectRateLimit with custom field names
proc `%`*(obj: ProjectRateLimit): JsonNode =
  result = newJObject()
  result["object"] = %obj.`object`
  result["id"] = %obj.id
  result["model"] = %obj.model
  result["max_requests_per_1_minute"] = %obj.maxRequestsPer1Minute
  result["max_tokens_per_1_minute"] = %obj.maxTokensPer1Minute
  if obj.maxImagesPer1Minute.isSome():
    result["max_images_per_1_minute"] = %obj.maxImagesPer1Minute.get()
  if obj.maxAudioMegabytesPer1Minute.isSome():
    result["max_audio_megabytes_per_1_minute"] = %obj.maxAudioMegabytesPer1Minute.get()
  if obj.maxRequestsPer1Day.isSome():
    result["max_requests_per_1_day"] = %obj.maxRequestsPer1Day.get()
  if obj.batch1DayMaxInputTokens.isSome():
    result["batch_1_day_max_input_tokens"] = %obj.batch1DayMaxInputTokens.get()

