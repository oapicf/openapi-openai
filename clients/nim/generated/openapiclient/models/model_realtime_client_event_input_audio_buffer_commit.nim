#
# OpenAI API
# 
# The OpenAI REST API. Please see https://platform.openai.com/docs/api-reference for more details.
# The version of the OpenAPI document: 2.3.0
# Contact: blah+oapicf@cliffano.com
# Generated by: https://openapi-generator.tech
#

import json
import tables
import marshal
import options


type `Type`* {.pure.} = enum
  InputAudioBufferCommit

type RealtimeClientEventInputAudioBufferCommit* = object
  ## Send this event to commit the user input audio buffer, which will create a  new user message item in the conversation. This event will produce an error  if the input audio buffer is empty. When in Server VAD mode, the client does  not need to send this event, the server will commit the audio buffer  automatically.  Committing the input audio buffer will trigger input audio transcription  (if enabled in session configuration), but it will not create a response  from the model. The server will respond with an `input_audio_buffer.committed`  event. 
  eventId*: Option[string] ## Optional client-generated ID used to identify this event.
  `type`*: `Type` ## The event type, must be `input_audio_buffer.commit`.

func `%`*(v: `Type`): JsonNode =
  result = case v:
    of `Type`.InputAudioBufferCommit: %"input_audio_buffer.commit"
func `$`*(v: `Type`): string =
  result = case v:
    of `Type`.InputAudioBufferCommit: $("input_audio_buffer.commit")

proc to*(node: JsonNode, T: typedesc[`Type`]): `Type` =
  if node.kind != JString:
    raise newException(ValueError, "Expected string for enum `Type`, got " & $node.kind)
  let strVal = node.getStr()
  case strVal:
  of $("input_audio_buffer.commit"):
    return `Type`.InputAudioBufferCommit
  else:
    raise newException(ValueError, "Invalid enum value for `Type`: " & strVal)


# Custom JSON deserialization for RealtimeClientEventInputAudioBufferCommit with custom field names
proc to*(node: JsonNode, T: typedesc[RealtimeClientEventInputAudioBufferCommit]): RealtimeClientEventInputAudioBufferCommit =
  result = RealtimeClientEventInputAudioBufferCommit()
  if node.kind == JObject:
    if node.hasKey("event_id") and node["event_id"].kind != JNull:
      result.eventId = some(to(node["event_id"], typeof(result.eventId.get())))
    if node.hasKey("type"):
      result.`type` = to(node["type"], `Type`)

# Custom JSON serialization for RealtimeClientEventInputAudioBufferCommit with custom field names
proc `%`*(obj: RealtimeClientEventInputAudioBufferCommit): JsonNode =
  result = newJObject()
  if obj.eventId.isSome():
    result["event_id"] = %obj.eventId.get()
  result["type"] = %obj.`type`

