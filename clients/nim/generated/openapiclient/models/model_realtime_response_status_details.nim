#
# OpenAI API
# 
# The OpenAI REST API. Please see https://platform.openai.com/docs/api-reference for more details.
# The version of the OpenAPI document: 2.3.0
# Contact: blah+oapicf@cliffano.com
# Generated by: https://openapi-generator.tech
#

import json
import tables
import marshal
import options

import model_realtime_response_status_details_error

type `Type`* {.pure.} = enum
  Completed
  Cancelled
  Failed
  Incomplete

type Reason* {.pure.} = enum
  TurnDetected
  ClientCancelled
  MaxOutputTokens
  ContentFilter

type RealtimeResponseStatusDetails* = object
  ## Additional details about the status.
  `type`*: Option[`Type`] ## The type of error that caused the response to fail, corresponding  with the `status` field (`completed`, `cancelled`, `incomplete`,  `failed`). 
  reason*: Option[Reason] ## The reason the Response did not complete. For a `cancelled` Response,  one of `turn_detected` (the server VAD detected a new start of speech)  or `client_cancelled` (the client sent a cancel event). For an  `incomplete` Response, one of `max_output_tokens` or `content_filter`  (the server-side safety filter activated and cut off the response). 
  error*: Option[RealtimeResponse_status_details_error]

func `%`*(v: `Type`): JsonNode =
  result = case v:
    of `Type`.Completed: %"completed"
    of `Type`.Cancelled: %"cancelled"
    of `Type`.Failed: %"failed"
    of `Type`.Incomplete: %"incomplete"
func `$`*(v: `Type`): string =
  result = case v:
    of `Type`.Completed: $("completed")
    of `Type`.Cancelled: $("cancelled")
    of `Type`.Failed: $("failed")
    of `Type`.Incomplete: $("incomplete")

proc to*(node: JsonNode, T: typedesc[`Type`]): `Type` =
  if node.kind != JString:
    raise newException(ValueError, "Expected string for enum `Type`, got " & $node.kind)
  let strVal = node.getStr()
  case strVal:
  of $("completed"):
    return `Type`.Completed
  of $("cancelled"):
    return `Type`.Cancelled
  of $("failed"):
    return `Type`.Failed
  of $("incomplete"):
    return `Type`.Incomplete
  else:
    raise newException(ValueError, "Invalid enum value for `Type`: " & strVal)

func `%`*(v: Reason): JsonNode =
  result = case v:
    of Reason.TurnDetected: %"turn_detected"
    of Reason.ClientCancelled: %"client_cancelled"
    of Reason.MaxOutputTokens: %"max_output_tokens"
    of Reason.ContentFilter: %"content_filter"
func `$`*(v: Reason): string =
  result = case v:
    of Reason.TurnDetected: $("turn_detected")
    of Reason.ClientCancelled: $("client_cancelled")
    of Reason.MaxOutputTokens: $("max_output_tokens")
    of Reason.ContentFilter: $("content_filter")

proc to*(node: JsonNode, T: typedesc[Reason]): Reason =
  if node.kind != JString:
    raise newException(ValueError, "Expected string for enum Reason, got " & $node.kind)
  let strVal = node.getStr()
  case strVal:
  of $("turn_detected"):
    return Reason.TurnDetected
  of $("client_cancelled"):
    return Reason.ClientCancelled
  of $("max_output_tokens"):
    return Reason.MaxOutputTokens
  of $("content_filter"):
    return Reason.ContentFilter
  else:
    raise newException(ValueError, "Invalid enum value for Reason: " & strVal)

