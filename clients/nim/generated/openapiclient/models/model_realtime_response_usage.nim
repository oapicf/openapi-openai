#
# OpenAI API
# 
# The OpenAI REST API. Please see https://platform.openai.com/docs/api-reference for more details.
# The version of the OpenAPI document: 2.3.0
# Contact: blah+oapicf@cliffano.com
# Generated by: https://openapi-generator.tech
#

import json
import tables
import marshal
import options

import model_realtime_response_usage_input_token_details
import model_realtime_response_usage_output_token_details

type RealtimeResponseUsage* = object
  ## Usage statistics for the Response, this will correspond to billing. A  Realtime API session will maintain a conversation context and append new  Items to the Conversation, thus output from previous turns (text and  audio tokens) will become the input for later turns. 
  totalTokens*: Option[int] ## The total number of tokens in the Response including input and output  text and audio tokens. 
  inputTokens*: Option[int] ## The number of input tokens used in the Response, including text and  audio tokens. 
  outputTokens*: Option[int] ## The number of output tokens sent in the Response, including text and  audio tokens. 
  inputTokenDetails*: Option[RealtimeResponse_usage_input_token_details]
  outputTokenDetails*: Option[RealtimeResponse_usage_output_token_details]


# Custom JSON deserialization for RealtimeResponseUsage with custom field names
proc to*(node: JsonNode, T: typedesc[RealtimeResponseUsage]): RealtimeResponseUsage =
  result = RealtimeResponseUsage()
  if node.kind == JObject:
    if node.hasKey("total_tokens") and node["total_tokens"].kind != JNull:
      result.totalTokens = some(to(node["total_tokens"], typeof(result.totalTokens.get())))
    if node.hasKey("input_tokens") and node["input_tokens"].kind != JNull:
      result.inputTokens = some(to(node["input_tokens"], typeof(result.inputTokens.get())))
    if node.hasKey("output_tokens") and node["output_tokens"].kind != JNull:
      result.outputTokens = some(to(node["output_tokens"], typeof(result.outputTokens.get())))
    if node.hasKey("input_token_details") and node["input_token_details"].kind != JNull:
      result.inputTokenDetails = some(to(node["input_token_details"], typeof(result.inputTokenDetails.get())))
    if node.hasKey("output_token_details") and node["output_token_details"].kind != JNull:
      result.outputTokenDetails = some(to(node["output_token_details"], typeof(result.outputTokenDetails.get())))

# Custom JSON serialization for RealtimeResponseUsage with custom field names
proc `%`*(obj: RealtimeResponseUsage): JsonNode =
  result = newJObject()
  if obj.totalTokens.isSome():
    result["total_tokens"] = %obj.totalTokens.get()
  if obj.inputTokens.isSome():
    result["input_tokens"] = %obj.inputTokens.get()
  if obj.outputTokens.isSome():
    result["output_tokens"] = %obj.outputTokens.get()
  if obj.inputTokenDetails.isSome():
    result["input_token_details"] = %obj.inputTokenDetails.get()
  if obj.outputTokenDetails.isSome():
    result["output_token_details"] = %obj.outputTokenDetails.get()

