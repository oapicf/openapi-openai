#
# OpenAI API
# 
# The OpenAI REST API. Please see https://platform.openai.com/docs/api-reference for more details.
# The version of the OpenAPI document: 2.3.0
# Contact: blah+oapicf@cliffano.com
# Generated by: https://openapi-generator.tech
#

import json
import tables
import marshal
import options

import model_realtime_server_event_rate_limits_updated_rate_limits_inner

type `Type`* {.pure.} = enum
  RateLimitsUpdated

type RealtimeServerEventRateLimitsUpdated* = object
  ## Emitted at the beginning of a Response to indicate the updated rate limits.  When a Response is created some tokens will be \"reserved\" for the output  tokens, the rate limits shown here reflect that reservation, which is then  adjusted accordingly once the Response is completed. 
  eventId*: string ## The unique ID of the server event.
  `type`*: `Type` ## The event type, must be `rate_limits.updated`.
  rateLimits*: seq[RealtimeServerEventRateLimitsUpdated_rate_limits_inner] ## List of rate limit information.

func `%`*(v: `Type`): JsonNode =
  result = case v:
    of `Type`.RateLimitsUpdated: %"rate_limits.updated"
func `$`*(v: `Type`): string =
  result = case v:
    of `Type`.RateLimitsUpdated: $("rate_limits.updated")

proc to*(node: JsonNode, T: typedesc[`Type`]): `Type` =
  if node.kind != JString:
    raise newException(ValueError, "Expected string for enum `Type`, got " & $node.kind)
  let strVal = node.getStr()
  case strVal:
  of $("rate_limits.updated"):
    return `Type`.RateLimitsUpdated
  else:
    raise newException(ValueError, "Invalid enum value for `Type`: " & strVal)


# Custom JSON deserialization for RealtimeServerEventRateLimitsUpdated with custom field names
proc to*(node: JsonNode, T: typedesc[RealtimeServerEventRateLimitsUpdated]): RealtimeServerEventRateLimitsUpdated =
  result = RealtimeServerEventRateLimitsUpdated()
  if node.kind == JObject:
    if node.hasKey("event_id"):
      result.eventId = to(node["event_id"], string)
    if node.hasKey("type"):
      result.`type` = to(node["type"], `Type`)
    if node.hasKey("rate_limits"):
      result.rateLimits = to(node["rate_limits"], seq[RealtimeServerEventRateLimitsUpdated_rate_limits_inner])

# Custom JSON serialization for RealtimeServerEventRateLimitsUpdated with custom field names
proc `%`*(obj: RealtimeServerEventRateLimitsUpdated): JsonNode =
  result = newJObject()
  result["event_id"] = %obj.eventId
  result["type"] = %obj.`type`
  result["rate_limits"] = %obj.rateLimits

