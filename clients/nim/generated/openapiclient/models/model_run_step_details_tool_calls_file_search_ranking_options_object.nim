#
# OpenAI API
# 
# The OpenAI REST API. Please see https://platform.openai.com/docs/api-reference for more details.
# The version of the OpenAPI document: 2.3.0
# Contact: blah+oapicf@cliffano.com
# Generated by: https://openapi-generator.tech
#

import json
import tables
import marshal
import options


type Ranker* {.pure.} = enum
  Default20240821

type RunStepDetailsToolCallsFileSearchRankingOptionsObject* = object
  ## The ranking options for the file search.
  ranker*: Ranker ## The ranker used for the file search.
  scoreThreshold*: float ## The score threshold for the file search. All values must be a floating point number between 0 and 1.

func `%`*(v: Ranker): JsonNode =
  result = case v:
    of Ranker.Default20240821: %"default_2024_08_21"
func `$`*(v: Ranker): string =
  result = case v:
    of Ranker.Default20240821: $("default_2024_08_21")

proc to*(node: JsonNode, T: typedesc[Ranker]): Ranker =
  if node.kind != JString:
    raise newException(ValueError, "Expected string for enum Ranker, got " & $node.kind)
  let strVal = node.getStr()
  case strVal:
  of $("default_2024_08_21"):
    return Ranker.Default20240821
  else:
    raise newException(ValueError, "Invalid enum value for Ranker: " & strVal)


# Custom JSON deserialization for RunStepDetailsToolCallsFileSearchRankingOptionsObject with custom field names
proc to*(node: JsonNode, T: typedesc[RunStepDetailsToolCallsFileSearchRankingOptionsObject]): RunStepDetailsToolCallsFileSearchRankingOptionsObject =
  result = RunStepDetailsToolCallsFileSearchRankingOptionsObject()
  if node.kind == JObject:
    if node.hasKey("ranker"):
      result.ranker = to(node["ranker"], Ranker)
    if node.hasKey("score_threshold"):
      result.scoreThreshold = to(node["score_threshold"], float)

# Custom JSON serialization for RunStepDetailsToolCallsFileSearchRankingOptionsObject with custom field names
proc `%`*(obj: RunStepDetailsToolCallsFileSearchRankingOptionsObject): JsonNode =
  result = newJObject()
  result["ranker"] = %obj.ranker
  result["score_threshold"] = %obj.scoreThreshold

