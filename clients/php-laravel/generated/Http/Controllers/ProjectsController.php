<?php declare(strict_types=1);

/**
 * OpenAI API
 * The OpenAI REST API. Please see https://platform.openai.com/docs/api-reference for more details.
 * PHP version 8.1
 *
 * The version of the OpenAPI document: 2.3.0
 * Contact: blah+oapicf@cliffano.com
 *
 * NOTE: This class is auto generated by OpenAPI-Generator
 * https://openapi-generator.tech
 * Do not edit the class manually.
 *
 * Source files are located at:
 *
 * > https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/php-laravel/
 */


namespace OpenAPI\Server\Http\Controllers;

use Crell\Serde\SerdeCommon;
use Illuminate\Routing\Controller;
use Illuminate\Http\JsonResponse;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Validator;


use OpenAPI\Server\Api\ProjectsApiInterface;

class ProjectsController extends Controller
{
    /**
     * Constructor
     */
    public function __construct(
        private readonly ProjectsApiInterface $api,
        private readonly SerdeCommon $serde = new SerdeCommon(),
    )
    {
    }

    /**
     * Operation archiveProject
     *
     * Archives a project in the organization. Archived projects cannot be used or updated..
     *
     */
    public function archiveProject(Request $request, string $projectId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'projectId' => $projectId,
                ],
                $request->all(),
            ),
            [
                'projectId' => [
                    'required',
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }



        $apiResult = $this->api->archiveProject($projectId);

        if ($apiResult instanceof \OpenAPI\Server\Model\Project) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation createProject
     *
     * Create a new project in the organization. Projects can be created and archived, but cannot be deleted..
     *
     */
    public function createProject(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $projectCreateRequest = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\ProjectCreateRequest::class);


        $apiResult = $this->api->createProject($projectCreateRequest);

        if ($apiResult instanceof \OpenAPI\Server\Model\Project) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation createProjectServiceAccount
     *
     * Creates a new service account in the project. This also returns an unredacted API key for the service account..
     *
     */
    public function createProjectServiceAccount(Request $request, string $projectId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'projectId' => $projectId,
                ],
                $request->all(),
            ),
            [
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $projectServiceAccountCreateRequest = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\ProjectServiceAccountCreateRequest::class);


        $apiResult = $this->api->createProjectServiceAccount($projectId, $projectServiceAccountCreateRequest);

        if ($apiResult instanceof \OpenAPI\Server\Model\ProjectServiceAccountCreateResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }

        if ($apiResult instanceof \OpenAPI\Server\Model\ErrorResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 400);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation createProjectUser
     *
     * Adds a user to the project. Users must already be members of the organization to be added to a project..
     *
     */
    public function createProjectUser(Request $request, string $projectId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'projectId' => $projectId,
                ],
                $request->all(),
            ),
            [
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $projectUserCreateRequest = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\ProjectUserCreateRequest::class);


        $apiResult = $this->api->createProjectUser($projectId, $projectUserCreateRequest);

        if ($apiResult instanceof \OpenAPI\Server\Model\ProjectUser) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }

        if ($apiResult instanceof \OpenAPI\Server\Model\ErrorResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 400);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation deleteProjectApiKey
     *
     * Deletes an API key from the project..
     *
     */
    public function deleteProjectApiKey(Request $request, string $projectId, string $keyId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'projectId' => $projectId,'keyId' => $keyId,
                ],
                $request->all(),
            ),
            [
                'projectId' => [
                    'required',
                    'string',
                ],
                'keyId' => [
                    'required',
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }




        $apiResult = $this->api->deleteProjectApiKey($projectId, $keyId);

        if ($apiResult instanceof \OpenAPI\Server\Model\ProjectApiKeyDeleteResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }

        if ($apiResult instanceof \OpenAPI\Server\Model\ErrorResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 400);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation deleteProjectServiceAccount
     *
     * Deletes a service account from the project..
     *
     */
    public function deleteProjectServiceAccount(Request $request, string $projectId, string $serviceAccountId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'projectId' => $projectId,'serviceAccountId' => $serviceAccountId,
                ],
                $request->all(),
            ),
            [
                'projectId' => [
                    'required',
                    'string',
                ],
                'serviceAccountId' => [
                    'required',
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }




        $apiResult = $this->api->deleteProjectServiceAccount($projectId, $serviceAccountId);

        if ($apiResult instanceof \OpenAPI\Server\Model\ProjectServiceAccountDeleteResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation deleteProjectUser
     *
     * Deletes a user from the project..
     *
     */
    public function deleteProjectUser(Request $request, string $projectId, string $userId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'projectId' => $projectId,'userId' => $userId,
                ],
                $request->all(),
            ),
            [
                'projectId' => [
                    'required',
                    'string',
                ],
                'userId' => [
                    'required',
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }




        $apiResult = $this->api->deleteProjectUser($projectId, $userId);

        if ($apiResult instanceof \OpenAPI\Server\Model\ProjectUserDeleteResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }

        if ($apiResult instanceof \OpenAPI\Server\Model\ErrorResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 400);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation listProjectApiKeys
     *
     * Returns a list of API keys in the project..
     *
     */
    public function listProjectApiKeys(Request $request, string $projectId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'projectId' => $projectId,
                ],
                $request->all(),
            ),
            [
                'projectId' => [
                    'required',
                    'string',
                ],
                'limit' => [
                    'integer',
                ],
                'after' => [
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $limit = $request->integer('limit');

        $after = $request->string('after')->value();


        $apiResult = $this->api->listProjectApiKeys($projectId, $limit, $after);

        if ($apiResult instanceof \OpenAPI\Server\Model\ProjectApiKeyListResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation listProjectRateLimits
     *
     * Returns the rate limits per model for a project..
     *
     */
    public function listProjectRateLimits(Request $request, string $projectId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'projectId' => $projectId,
                ],
                $request->all(),
            ),
            [
                'projectId' => [
                    'required',
                    'string',
                ],
                'limit' => [
                    'integer',
                ],
                'after' => [
                    'string',
                ],
                'before' => [
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $limit = $request->integer('limit');

        $after = $request->string('after')->value();

        $before = $request->string('before')->value();


        $apiResult = $this->api->listProjectRateLimits($projectId, $limit, $after, $before);

        if ($apiResult instanceof \OpenAPI\Server\Model\ProjectRateLimitListResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation listProjectServiceAccounts
     *
     * Returns a list of service accounts in the project..
     *
     */
    public function listProjectServiceAccounts(Request $request, string $projectId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'projectId' => $projectId,
                ],
                $request->all(),
            ),
            [
                'projectId' => [
                    'required',
                    'string',
                ],
                'limit' => [
                    'integer',
                ],
                'after' => [
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $limit = $request->integer('limit');

        $after = $request->string('after')->value();


        $apiResult = $this->api->listProjectServiceAccounts($projectId, $limit, $after);

        if ($apiResult instanceof \OpenAPI\Server\Model\ProjectServiceAccountListResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }

        if ($apiResult instanceof \OpenAPI\Server\Model\ErrorResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 400);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation listProjectUsers
     *
     * Returns a list of users in the project..
     *
     */
    public function listProjectUsers(Request $request, string $projectId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'projectId' => $projectId,
                ],
                $request->all(),
            ),
            [
                'projectId' => [
                    'required',
                    'string',
                ],
                'limit' => [
                    'integer',
                ],
                'after' => [
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $limit = $request->integer('limit');

        $after = $request->string('after')->value();


        $apiResult = $this->api->listProjectUsers($projectId, $limit, $after);

        if ($apiResult instanceof \OpenAPI\Server\Model\ProjectUserListResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }

        if ($apiResult instanceof \OpenAPI\Server\Model\ErrorResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 400);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation listProjects
     *
     * Returns a list of projects..
     *
     */
    public function listProjects(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'limit' => [
                    'integer',
                ],
                'after' => [
                    'string',
                ],
                'includeArchived' => [
                    'boolean',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $limit = $request->integer('limit');

        $after = $request->string('after')->value();

        $includeArchived = $request->boolean('includeArchived');


        $apiResult = $this->api->listProjects($limit, $after, $includeArchived);

        if ($apiResult instanceof \OpenAPI\Server\Model\ProjectListResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation modifyProject
     *
     * Modifies a project in the organization..
     *
     */
    public function modifyProject(Request $request, string $projectId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'projectId' => $projectId,
                ],
                $request->all(),
            ),
            [
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $projectUpdateRequest = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\ProjectUpdateRequest::class);


        $apiResult = $this->api->modifyProject($projectId, $projectUpdateRequest);

        if ($apiResult instanceof \OpenAPI\Server\Model\Project) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }

        if ($apiResult instanceof \OpenAPI\Server\Model\ErrorResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 400);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation modifyProjectUser
     *
     * Modifies a user's role in the project..
     *
     */
    public function modifyProjectUser(Request $request, string $projectId, string $userId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'projectId' => $projectId,'userId' => $userId,
                ],
                $request->all(),
            ),
            [
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }



        $projectUserUpdateRequest = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\ProjectUserUpdateRequest::class);


        $apiResult = $this->api->modifyProjectUser($projectId, $userId, $projectUserUpdateRequest);

        if ($apiResult instanceof \OpenAPI\Server\Model\ProjectUser) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }

        if ($apiResult instanceof \OpenAPI\Server\Model\ErrorResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 400);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation retrieveProject
     *
     * Retrieves a project..
     *
     */
    public function retrieveProject(Request $request, string $projectId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'projectId' => $projectId,
                ],
                $request->all(),
            ),
            [
                'projectId' => [
                    'required',
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }



        $apiResult = $this->api->retrieveProject($projectId);

        if ($apiResult instanceof \OpenAPI\Server\Model\Project) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation retrieveProjectApiKey
     *
     * Retrieves an API key in the project..
     *
     */
    public function retrieveProjectApiKey(Request $request, string $projectId, string $keyId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'projectId' => $projectId,'keyId' => $keyId,
                ],
                $request->all(),
            ),
            [
                'projectId' => [
                    'required',
                    'string',
                ],
                'keyId' => [
                    'required',
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }




        $apiResult = $this->api->retrieveProjectApiKey($projectId, $keyId);

        if ($apiResult instanceof \OpenAPI\Server\Model\ProjectApiKey) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation retrieveProjectServiceAccount
     *
     * Retrieves a service account in the project..
     *
     */
    public function retrieveProjectServiceAccount(Request $request, string $projectId, string $serviceAccountId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'projectId' => $projectId,'serviceAccountId' => $serviceAccountId,
                ],
                $request->all(),
            ),
            [
                'projectId' => [
                    'required',
                    'string',
                ],
                'serviceAccountId' => [
                    'required',
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }




        $apiResult = $this->api->retrieveProjectServiceAccount($projectId, $serviceAccountId);

        if ($apiResult instanceof \OpenAPI\Server\Model\ProjectServiceAccount) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation retrieveProjectUser
     *
     * Retrieves a user in the project..
     *
     */
    public function retrieveProjectUser(Request $request, string $projectId, string $userId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'projectId' => $projectId,'userId' => $userId,
                ],
                $request->all(),
            ),
            [
                'projectId' => [
                    'required',
                    'string',
                ],
                'userId' => [
                    'required',
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }




        $apiResult = $this->api->retrieveProjectUser($projectId, $userId);

        if ($apiResult instanceof \OpenAPI\Server\Model\ProjectUser) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation updateProjectRateLimits
     *
     * Updates a project rate limit..
     *
     */
    public function updateProjectRateLimits(Request $request, string $projectId, string $rateLimitId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'projectId' => $projectId,'rateLimitId' => $rateLimitId,
                ],
                $request->all(),
            ),
            [
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }



        $projectRateLimitUpdateRequest = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\ProjectRateLimitUpdateRequest::class);


        $apiResult = $this->api->updateProjectRateLimits($projectId, $rateLimitId, $projectRateLimitUpdateRequest);

        if ($apiResult instanceof \OpenAPI\Server\Model\ProjectRateLimit) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }

        if ($apiResult instanceof \OpenAPI\Server\Model\ErrorResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 400);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
}
