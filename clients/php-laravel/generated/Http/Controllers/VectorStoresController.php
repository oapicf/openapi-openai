<?php declare(strict_types=1);

/**
 * OpenAI API
 * The OpenAI REST API. Please see https://platform.openai.com/docs/api-reference for more details.
 * PHP version 8.1
 *
 * The version of the OpenAPI document: 2.3.0
 * Contact: blah+oapicf@cliffano.com
 *
 * NOTE: This class is auto generated by OpenAPI-Generator
 * https://openapi-generator.tech
 * Do not edit the class manually.
 *
 * Source files are located at:
 *
 * > https://github.com/OpenAPITools/openapi-generator/blob/master/modules/openapi-generator/src/main/resources/php-laravel/
 */


namespace OpenAPI\Server\Http\Controllers;

use Crell\Serde\SerdeCommon;
use Illuminate\Routing\Controller;
use Illuminate\Http\JsonResponse;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\Validator;


use OpenAPI\Server\Api\VectorStoresApiInterface;

class VectorStoresController extends Controller
{
    /**
     * Constructor
     */
    public function __construct(
        private readonly VectorStoresApiInterface $api,
        private readonly SerdeCommon $serde = new SerdeCommon(),
    )
    {
    }

    /**
     * Operation cancelVectorStoreFileBatch
     *
     * Cancel a vector store file batch. This attempts to cancel the processing of files in this batch as soon as possible..
     *
     */
    public function cancelVectorStoreFileBatch(Request $request, string $vectorStoreId, string $batchId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'vectorStoreId' => $vectorStoreId,'batchId' => $batchId,
                ],
                $request->all(),
            ),
            [
                'vectorStoreId' => [
                    'required',
                    'string',
                ],
                'batchId' => [
                    'required',
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }




        $apiResult = $this->api->cancelVectorStoreFileBatch($vectorStoreId, $batchId);

        if ($apiResult instanceof \OpenAPI\Server\Model\VectorStoreFileBatchObject) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation createVectorStore
     *
     * Create a vector store..
     *
     */
    public function createVectorStore(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $createVectorStoreRequest = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\CreateVectorStoreRequest::class);


        $apiResult = $this->api->createVectorStore($createVectorStoreRequest);

        if ($apiResult instanceof \OpenAPI\Server\Model\VectorStoreObject) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation createVectorStoreFile
     *
     * Create a vector store file by attaching a [File](/docs/api-reference/files) to a [vector store](/docs/api-reference/vector-stores/object)..
     *
     */
    public function createVectorStoreFile(Request $request, string $vectorStoreId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'vectorStoreId' => $vectorStoreId,
                ],
                $request->all(),
            ),
            [
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $createVectorStoreFileRequest = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\CreateVectorStoreFileRequest::class);


        $apiResult = $this->api->createVectorStoreFile($vectorStoreId, $createVectorStoreFileRequest);

        if ($apiResult instanceof \OpenAPI\Server\Model\VectorStoreFileObject) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation createVectorStoreFileBatch
     *
     * Create a vector store file batch..
     *
     */
    public function createVectorStoreFileBatch(Request $request, string $vectorStoreId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'vectorStoreId' => $vectorStoreId,
                ],
                $request->all(),
            ),
            [
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $createVectorStoreFileBatchRequest = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\CreateVectorStoreFileBatchRequest::class);


        $apiResult = $this->api->createVectorStoreFileBatch($vectorStoreId, $createVectorStoreFileBatchRequest);

        if ($apiResult instanceof \OpenAPI\Server\Model\VectorStoreFileBatchObject) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation deleteVectorStore
     *
     * Delete a vector store..
     *
     */
    public function deleteVectorStore(Request $request, string $vectorStoreId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'vectorStoreId' => $vectorStoreId,
                ],
                $request->all(),
            ),
            [
                'vectorStoreId' => [
                    'required',
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }



        $apiResult = $this->api->deleteVectorStore($vectorStoreId);

        if ($apiResult instanceof \OpenAPI\Server\Model\DeleteVectorStoreResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation deleteVectorStoreFile
     *
     * Delete a vector store file. This will remove the file from the vector store but the file itself will not be deleted. To delete the file, use the [delete file](/docs/api-reference/files/delete) endpoint..
     *
     */
    public function deleteVectorStoreFile(Request $request, string $vectorStoreId, string $fileId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'vectorStoreId' => $vectorStoreId,'fileId' => $fileId,
                ],
                $request->all(),
            ),
            [
                'vectorStoreId' => [
                    'required',
                    'string',
                ],
                'fileId' => [
                    'required',
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }




        $apiResult = $this->api->deleteVectorStoreFile($vectorStoreId, $fileId);

        if ($apiResult instanceof \OpenAPI\Server\Model\DeleteVectorStoreFileResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation getVectorStore
     *
     * Retrieves a vector store..
     *
     */
    public function getVectorStore(Request $request, string $vectorStoreId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'vectorStoreId' => $vectorStoreId,
                ],
                $request->all(),
            ),
            [
                'vectorStoreId' => [
                    'required',
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }



        $apiResult = $this->api->getVectorStore($vectorStoreId);

        if ($apiResult instanceof \OpenAPI\Server\Model\VectorStoreObject) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation getVectorStoreFile
     *
     * Retrieves a vector store file..
     *
     */
    public function getVectorStoreFile(Request $request, string $vectorStoreId, string $fileId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'vectorStoreId' => $vectorStoreId,'fileId' => $fileId,
                ],
                $request->all(),
            ),
            [
                'vectorStoreId' => [
                    'required',
                    'string',
                ],
                'fileId' => [
                    'required',
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }




        $apiResult = $this->api->getVectorStoreFile($vectorStoreId, $fileId);

        if ($apiResult instanceof \OpenAPI\Server\Model\VectorStoreFileObject) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation getVectorStoreFileBatch
     *
     * Retrieves a vector store file batch..
     *
     */
    public function getVectorStoreFileBatch(Request $request, string $vectorStoreId, string $batchId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'vectorStoreId' => $vectorStoreId,'batchId' => $batchId,
                ],
                $request->all(),
            ),
            [
                'vectorStoreId' => [
                    'required',
                    'string',
                ],
                'batchId' => [
                    'required',
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }




        $apiResult = $this->api->getVectorStoreFileBatch($vectorStoreId, $batchId);

        if ($apiResult instanceof \OpenAPI\Server\Model\VectorStoreFileBatchObject) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation listFilesInVectorStoreBatch
     *
     * Returns a list of vector store files in a batch..
     *
     */
    public function listFilesInVectorStoreBatch(Request $request, string $vectorStoreId, string $batchId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'vectorStoreId' => $vectorStoreId,'batchId' => $batchId,
                ],
                $request->all(),
            ),
            [
                'vectorStoreId' => [
                    'required',
                    'string',
                ],
                'batchId' => [
                    'required',
                    'string',
                ],
                'limit' => [
                    'integer',
                ],
                'order' => [
                ],
                'after' => [
                    'string',
                ],
                'before' => [
                    'string',
                ],
                'filter' => [
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }



        $limit = $request->integer('limit');

        $order = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\ListAssistantsOrderParameter::class);

        $after = $request->string('after')->value();

        $before = $request->string('before')->value();

        $filter = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\ListFilesInVectorStoreBatchFilterParameter::class);


        $apiResult = $this->api->listFilesInVectorStoreBatch($vectorStoreId, $batchId, $limit, $order, $after, $before, $filter);

        if ($apiResult instanceof \OpenAPI\Server\Model\ListVectorStoreFilesResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation listVectorStoreFiles
     *
     * Returns a list of vector store files..
     *
     */
    public function listVectorStoreFiles(Request $request, string $vectorStoreId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'vectorStoreId' => $vectorStoreId,
                ],
                $request->all(),
            ),
            [
                'vectorStoreId' => [
                    'required',
                    'string',
                ],
                'limit' => [
                    'integer',
                ],
                'order' => [
                ],
                'after' => [
                    'string',
                ],
                'before' => [
                    'string',
                ],
                'filter' => [
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $limit = $request->integer('limit');

        $order = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\ListAssistantsOrderParameter::class);

        $after = $request->string('after')->value();

        $before = $request->string('before')->value();

        $filter = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\ListFilesInVectorStoreBatchFilterParameter::class);


        $apiResult = $this->api->listVectorStoreFiles($vectorStoreId, $limit, $order, $after, $before, $filter);

        if ($apiResult instanceof \OpenAPI\Server\Model\ListVectorStoreFilesResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation listVectorStores
     *
     * Returns a list of vector stores..
     *
     */
    public function listVectorStores(Request $request): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    
                ],
                $request->all(),
            ),
            [
                'limit' => [
                    'integer',
                ],
                'order' => [
                ],
                'after' => [
                    'string',
                ],
                'before' => [
                    'string',
                ],
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }

        $limit = $request->integer('limit');

        $order = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\ListAssistantsOrderParameter::class);

        $after = $request->string('after')->value();

        $before = $request->string('before')->value();


        $apiResult = $this->api->listVectorStores($limit, $order, $after, $before);

        if ($apiResult instanceof \OpenAPI\Server\Model\ListVectorStoresResponse) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
    /**
     * Operation modifyVectorStore
     *
     * Modifies a vector store..
     *
     */
    public function modifyVectorStore(Request $request, string $vectorStoreId): JsonResponse
    {
        $validator = Validator::make(
            array_merge(
                [
                    'vectorStoreId' => $vectorStoreId,
                ],
                $request->all(),
            ),
            [
            ],
        );

        if ($validator->fails()) {
            return response()->json(['error' => 'Invalid input'], 400);
        }


        $updateVectorStoreRequest = $this->serde->deserialize($request->getContent(), from: 'json', to: \OpenAPI\Server\Model\UpdateVectorStoreRequest::class);


        $apiResult = $this->api->modifyVectorStore($vectorStoreId, $updateVectorStoreRequest);

        if ($apiResult instanceof \OpenAPI\Server\Model\VectorStoreObject) {
            return response()->json($this->serde->serialize($apiResult, format: 'array'), 200);
        }


        // This shouldn't happen
        return response()->abort(500);
    }
}
