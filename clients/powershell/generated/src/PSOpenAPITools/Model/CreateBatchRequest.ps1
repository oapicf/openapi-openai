#
# OpenAI API
# The OpenAI REST API. Please see https://platform.openai.com/docs/api-reference for more details.
# Version: 2.3.0
# Contact: blah+oapicf@cliffano.com
# Generated by OpenAPI Generator: https://openapi-generator.tech
#

<#
.SYNOPSIS

No summary available.

.DESCRIPTION

No description available.

.PARAMETER InputFileId
The ID of an uploaded file that contains requests for the new batch.  See [upload file](/docs/api-reference/files/create) for how to upload a file.  Your input file must be formatted as a [JSONL file](/docs/api-reference/batch/request-input), and must be uploaded with the purpose `batch`. The file can contain up to 50,000 requests, and can be up to 200 MB in size. 
.PARAMETER Endpoint
The endpoint to be used for all requests in the batch. Currently `/v1/chat/completions`, `/v1/embeddings`, and `/v1/completions` are supported. Note that `/v1/embeddings` batches are also restricted to a maximum of 50,000 embedding inputs across all requests in the batch.
.PARAMETER CompletionWindow
The time frame within which the batch should be processed. Currently only `24h` is supported.
.PARAMETER Metadata
Optional custom metadata for the batch.
.OUTPUTS

CreateBatchRequest<PSCustomObject>
#>

function Initialize-CreateBatchRequest {
    [CmdletBinding()]
    Param (
        [Parameter(Position = 0, ValueFromPipelineByPropertyName = $true)]
        [String]
        ${InputFileId},
        [Parameter(Position = 1, ValueFromPipelineByPropertyName = $true)]
        [ValidateSet("/v1/chat/completions", "/v1/embeddings", "/v1/completions")]
        [String]
        ${Endpoint},
        [Parameter(Position = 2, ValueFromPipelineByPropertyName = $true)]
        [ValidateSet("24h")]
        [String]
        ${CompletionWindow},
        [Parameter(Position = 3, ValueFromPipelineByPropertyName = $true)]
        [System.Collections.Hashtable]
        ${Metadata}
    )

    Process {
        'Creating PSCustomObject: PSOpenAPITools => CreateBatchRequest' | Write-Debug
        $PSBoundParameters | Out-DebugParameter | Write-Debug

        if ($null -eq $InputFileId) {
            throw "invalid value for 'InputFileId', 'InputFileId' cannot be null."
        }

        if ($null -eq $Endpoint) {
            throw "invalid value for 'Endpoint', 'Endpoint' cannot be null."
        }

        if ($null -eq $CompletionWindow) {
            throw "invalid value for 'CompletionWindow', 'CompletionWindow' cannot be null."
        }


        $PSO = [PSCustomObject]@{
            "input_file_id" = ${InputFileId}
            "endpoint" = ${Endpoint}
            "completion_window" = ${CompletionWindow}
            "metadata" = ${Metadata}
        }


        return $PSO
    }
}

<#
.SYNOPSIS

Convert from JSON to CreateBatchRequest<PSCustomObject>

.DESCRIPTION

Convert from JSON to CreateBatchRequest<PSCustomObject>

.PARAMETER Json

Json object

.OUTPUTS

CreateBatchRequest<PSCustomObject>
#>
function ConvertFrom-JsonToCreateBatchRequest {
    Param(
        [AllowEmptyString()]
        [string]$Json
    )

    Process {
        'Converting JSON to PSCustomObject: PSOpenAPITools => CreateBatchRequest' | Write-Debug
        $PSBoundParameters | Out-DebugParameter | Write-Debug

        $JsonParameters = ConvertFrom-Json -InputObject $Json

        # check if Json contains properties not defined in CreateBatchRequest
        $AllProperties = ("input_file_id", "endpoint", "completion_window", "metadata")
        foreach ($name in $JsonParameters.PsObject.Properties.Name) {
            if (!($AllProperties.Contains($name))) {
                throw "Error! JSON key '$name' not found in the properties: $($AllProperties)"
            }
        }

        If ([string]::IsNullOrEmpty($Json) -or $Json -eq "{}") { # empty json
            throw "Error! Empty JSON cannot be serialized due to the required property 'input_file_id' missing."
        }

        if (!([bool]($JsonParameters.PSobject.Properties.name -match "input_file_id"))) {
            throw "Error! JSON cannot be serialized due to the required property 'input_file_id' missing."
        } else {
            $InputFileId = $JsonParameters.PSobject.Properties["input_file_id"].value
        }

        if (!([bool]($JsonParameters.PSobject.Properties.name -match "endpoint"))) {
            throw "Error! JSON cannot be serialized due to the required property 'endpoint' missing."
        } else {
            $Endpoint = $JsonParameters.PSobject.Properties["endpoint"].value
        }

        if (!([bool]($JsonParameters.PSobject.Properties.name -match "completion_window"))) {
            throw "Error! JSON cannot be serialized due to the required property 'completion_window' missing."
        } else {
            $CompletionWindow = $JsonParameters.PSobject.Properties["completion_window"].value
        }

        if (!([bool]($JsonParameters.PSobject.Properties.name -match "metadata"))) { #optional property not found
            $Metadata = $null
        } else {
            $Metadata = $JsonParameters.PSobject.Properties["metadata"].value
        }

        $PSO = [PSCustomObject]@{
            "input_file_id" = ${InputFileId}
            "endpoint" = ${Endpoint}
            "completion_window" = ${CompletionWindow}
            "metadata" = ${Metadata}
        }

        return $PSO
    }

}

